<!DOCTYPE html>
<html lang="es" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simuladores de Arquitectura de Computadoras</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        black: {
                            500: '#000000',
                            600: '#111111',
                            700: '#222222',
                        },
                        blue: {
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500&family=Rubik:wght@400;500;600&display=swap');

        :root {
            --primary: #000000;
            --secondary: #3b82f6;
            --bg-dark: #111827;
            --text-light: #f3f4f6;
            --highlight: rgba(59, 130, 246, 0.2);
        }

        body {
            font-family: 'Rubik', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
        }

        .mono {
            font-family: 'Roboto Mono', monospace;
        }

        .highlight {
            transition: all 0.5s ease;
            background-color: var(--highlight);
            box-shadow: 0 0 0 2px var(--secondary);
        }

        .bus {
            stroke: var(--secondary);
            stroke-width: 2;
            stroke-dasharray: 5;
            animation: dash 1s linear infinite;
        }

        @keyframes dash {
            to {
                stroke-dashoffset: 10;
            }
        }

        .memory-cell {
            transition: all 0.3s ease;
        }

        .register {
            transition: all 0.3s ease;
        }

        .log-entry {
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .instruction-format {
            font-family: 'Roboto Mono', monospace;
            background: #1a202c;
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }
        
        .opcode-legend {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }
        
        .opcode-legend.expanded {
            max-height: 1000px;
        }
        
        .toggle-legend {
            cursor: pointer;
            user-select: none;
        }
        
        .notation-legend {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }
        
        .notation-legend.expanded {
            max-height: 500px;
        }

        .simulator-container {
            display: none;
        }

        .simulator-container.active {
            display: block;
        }

        .simulator-card {
            transition: all 0.3s ease;
            transform: translateY(0);
        }

        .simulator-card:hover {
            transform: translateY(-5px);
        }
    </style>
</head>

<body class="min-h-screen p-4">
    <div class="container mx-auto">
        <!-- Header -->
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-blue-400 mb-2">Simuladores de Arquitectura de Computadoras</h1>
            <p class="text-gray-400">Visualizando el flujo de instrucción de diferentes arquitecturas</p>
        </header>

        <!-- Selector de Simulador -->
        <div class="bg-black-700 rounded-lg p-6 mb-8 shadow-lg">
            <h2 class="text-xl font-semibold text-blue-400 mb-4">Seleccione un Simulador</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <!-- IAS Simulator Card -->
                <div class="simulator-card bg-black-600 rounded-lg p-6 border border-gray-700 hover:border-blue-500 transition cursor-pointer"
                    id="iasCard">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center mr-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" />
                            </svg>
                        </div>
                        <div>
                            <h3 class="font-medium text-blue-400 text-lg">Computador IAS</h3>
                            <p class="text-sm text-gray-400">Arquitectura de von Neumann original</p>
                        </div>
                    </div>
                    <p class="text-gray-300 text-sm mb-4">
                        El computador IAS (Institute for Advanced Study) fue una de las primeras computadoras electrónicas de almacenamiento de programas, diseñada por John von Neumann.
                    </p>
                    <div class="flex justify-between items-center">
                        <span class="text-xs text-gray-500">40 bits por palabra, 1000 palabras de memoria</span>
                        <button class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded text-sm font-medium transition">
                            Seleccionar
                        </button>
                    </div>
                </div>
                
                <!-- Von Neumann Machine Card -->
                <div class="simulator-card bg-black-600 rounded-lg p-6 border border-gray-700 hover:border-blue-500 transition cursor-pointer"
                    id="vonNeumannCard">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center mr-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                            </svg>
                        </div>
                        <div>
                            <h3 class="font-medium text-purple-400 text-lg">Máquina Hipotética de Von Neumann</h3>
                            <p class="text-sm text-gray-400">Modelo teórico de arquitectura</p>
                        </div>
                    </div>
                    <p class="text-gray-300 text-sm mb-4">
                        Una representación conceptual de la arquitectura de von Neumann que ilustra los componentes fundamentales y el flujo de datos en una computadora de programa almacenado.
                    </p>
                    <div class="flex justify-between items-center">
                        <span class="text-xs text-gray-500">Modelo teórico con componentes básicos</span>
                        <button class="bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded text-sm font-medium transition">
                            Seleccionar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- IAS Simulator Container -->
        <div id="iasSimulator" class="simulator-container">
            <!-- IAS Content (copiado del archivo original) -->
            <div class="mb-8 text-center">
                <h2 class="text-2xl font-bold text-blue-400 mb-2">Simulador del Computador IAS</h2>
                <p class="text-gray-400">Visualizando el ciclo de búsqueda-ejecución de la arquitectura IAS</p>
                
                <!-- Instruction Format Information -->
                <div class="instruction-format mt-4 text-left max-w-2xl mx-auto">
                    <h3 class="text-blue-400 font-semibold mb-2">Formato de Instrucción IAS</h3>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <p><span class="text-green-400">Instrucción Izquierda (20 bits):</span></p>
                            <p class="mono">Código de operación (8 bits) | Dirección (12 bits)</p>
                        </div>
                        <div>
                            <p><span class="text-green-400">Instrucción Derecha (20 bits):</span></p>
                            <p class="mono">Código de operación (8 bits) | Dirección (12 bits)</p>
                        </div>
                    </div>
                    <div class="mt-2 text-xs text-gray-400">
                        <p>Cada palabra de memoria contiene 40 bits: dos instrucciones de 20 bits o un número de 40 bits</p>
                    </div>
                </div>
                
                <!-- Notation Legend -->
                <div class="instruction-format mt-4 text-left max-w-2xl mx-auto">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-blue-400 font-semibold">Notación Utilizada en el Simulador</h3>
                        <span id="toggleNotation" class="toggle-legend text-blue-400 text-sm">
                            <span id="toggleNotationText">Mostrar</span> ▼
                        </span>
                    </div>
                    <div id="notationLegend" class="notation-legend">
                        <div class="text-sm space-y-2">
                            <div>
                                <p class="text-yellow-400 font-medium">Direcciones de Memoria:</p>
                                <p class="text-xs text-gray-300 mt-1">
                                    Las direcciones se representan con el prefijo <span class="mono">0x</span> para indicar una notación de memoria "realista".
                                    Por ejemplo: <span class="mono">0x100</span> representa una dirección X en decimal.
                                </p>
                            </div>
                            <div>
                                <p class="text-yellow-400 font-medium">Registros Principales:</p>
                                <p class="text-xs text-gray-300 mt-1">
                                    <span class="mono">PC</span> - Program Counter (Contador de Programa)<br>
                                    <span class="mono">MAR</span> - Memory Address Register (Registro de Dirección de Memoria)<br>
                                    <span class="mono">MBR</span> - Memory Buffer Register (Registro Buffer de Memoria)<br>
                                    <span class="mono">IR</span> - Instruction Register (Registro de Instrucción)<br>
                                    <span class="mono">IBR</span> - Instruction Buffer Register (Registro Buffer de Instrucción)<br>
                                    <span class="mono">AC</span> - Accumulator (Acumulador)<br>
                                    <span class="mono">MQ</span> - Multiplier-Quotient (Multiplicador-Cociente)
                                </p>
                            </div>
                            <div>
                                <p class="text-yellow-400 font-medium">Notación de Memoria:</p>
                                <p class="text-xs text-gray-300 mt-1">
                                    <span class="mono">M(X)</span> representa el contenido almacenado en la dirección de memoria X.<br>
                                    Por ejemplo: <span class="mono">M(0x200)</span> se refiere al dato almacenado en la dirección 0x200.
                                </p>
                            </div>
                            <div>
                                <p class="text-yellow-400 font-medium">Flujo de Datos:</p>
                                <p class="text-xs text-gray-300 mt-1">
                                    La flecha <span class="mono">→</span> indica la dirección del flujo de datos.<br>
                                    Ejemplo: <span class="mono">PC → MAR</span> significa que el contenido de PC se transfiere a MAR.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Opcode Legend -->
                <div class="instruction-format mt-4 text-left max-w-4xl mx-auto">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-blue-400 font-semibold">Leyenda de Códigos de Operación (Opcode)</h3>
                        <span id="toggleLegend" class="toggle-legend text-blue-400 text-sm">
                            <span id="toggleText">Mostrar</span> ▼
                        </span>
                    </div>
                    <div id="opcodeLegend" class="opcode-legend">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <!-- Data Transfer Instructions -->
                            <div>
                                <h4 class="text-green-400 font-medium mb-2">Instrucciones de Transferencia de Datos</h4>
                                <table class="w-full text-xs">
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">LOAD(00000001) MQ</td>
                                        <td>Transfiere contenido del registro MQ al acumulador AC</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">LOAD(00000001) MQ,M(X)</td>
                                        <td>Transfiere contenido de memoria M(X) al registro MQ</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">STOR(00100001) M(X)</td>
                                        <td>Almacena contenido del acumulador AC en memoria M(X)</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">LOAD(00000001) M(X)</td>
                                        <td>Transfiere contenido de memoria M(X) al acumulador AC</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">LOAD -M(X)</td>
                                        <td>Transfiere contenido negativo de memoria M(X) al AC</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">LOAD |M(X)|</td>
                                        <td>Transfiere valor absoluto de memoria M(X) al AC</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">LOAD -|M(X)|</td>
                                        <td>Transfiere valor absoluto negativo de memoria M(X) al AC</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <!-- Unconditional Branch Instructions -->
                            <div>
                                <h4 class="text-green-400 font-medium mb-2">Instrucciones de Salto Incondicional</h4>
                                <table class="w-full text-xs">
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">JUMP M(X,0:19)</td>
                                        <td>Salta a la instrucción izquierda en memoria M(X)</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">JUMP M(X,20:39)</td>
                                        <td>Salta a la instrucción derecha en memoria M(X)</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <!-- Conditional Branch Instructions -->
                            <div>
                                <h4 class="text-green-400 font-medium mb-2">Instrucciones de Salto Condicional</h4>
                                <table class="w-full text-xs">
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">JUMP + M(X,0:19)</td>
                                        <td>Si AC ≥ 0, salta a instrucción izquierda en M(X)</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">JUMP + M(X,20:39)</td>
                                        <td>Si AC ≥ 0, salta a instrucción derecha en M(X)</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <!-- Arithmetic Instructions -->
                            <div>
                                <h4 class="text-green-400 font-medium mb-2">Instrucciones Aritméticas</h4>
                                <table class="w-full text-xs">
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">ADD(00000101) M(X)</td>
                                        <td>Suma contenido de memoria M(X) al acumulador AC</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">ADD |M(X)|</td>
                                        <td>Suma valor absoluto de memoria M(X) al AC</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">SUB(00000110) M(X)</td>
                                        <td>Resta contenido de memoria M(X) del acumulador AC</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">SUB |M(X)|</td>
                                        <td>Resta valor absoluto de memoria M(X) del AC</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">MUL M(X)</td>
                                        <td>Multiplica AC por memoria M(X), resultado en MQ y AC</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">DIV M(X)</td>
                                        <td>Divide AC por memoria M(X), cociente en MQ, resto en AC</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <!-- Address Modify Instructions -->
                            <div>
                                <h4 class="text-green-400 font-medium mb-2">Instrucciones de Modificación de Dirección</h4>
                                <table class="w-full text-xs">
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">LSH</td>
                                        <td>Desplaza acumulador AC una posición a la izquierda</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">RSH</td>
                                        <td>Desplaza acumulador AC una posición a la derecha</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <!-- Special Instructions -->
                            <div>
                                <h4 class="text-green-400 font-medium mb-2">Instrucciones Especiales</h4>
                                <table class="w-full text-xs">
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">STOR(00100001) M(X,8:19)</td>
                                        <td>Almacena bits 8-19 del AC en memoria M(X)</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">STOR(00100001) M(X,28:39)</td>
                                        <td>Almacena bits 28-39 del AC en memoria M(X)</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="mt-3 text-xs text-gray-400">
                            <p><span class="text-yellow-400">Nota:</span> M(X) representa la ubicación de memoria en la dirección X. Los registros principales son AC (Acumulador) y MQ (Multiplicador-Cociente).</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Selector de Casos de Prueba -->
            <div class="bg-black-700 rounded-lg p-6 mb-8 shadow-lg">
                <h2 class="text-xl font-semibold text-blue-400 mb-4">Seleccione un Caso de Prueba</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <!-- Caso 1 -->
                    <div class="case-card bg-black-600 rounded-lg p-4 border border-gray-700 hover:border-blue-500 transition cursor-pointer"
                        data-case="1">
                        <h3 class="font-medium text-blue-400 mb-1">Caso 1: Suma Básica</h3>
                        <p class="text-sm text-gray-400">Carga un número, suma otro y almacena el resultado</p>
                    </div>
                    <!-- Caso 2 -->
                    <div class="case-card bg-black-600 rounded-lg p-4 border border-gray-700 hover:border-blue-500 transition cursor-pointer"
                        data-case="2">
                        <h3 class="font-medium text-blue-400 mb-1">Caso 2: Resta Básica</h3>
                        <p class="text-sm text-gray-400">Carga un número, resta otro y almacena el resultado</p>
                    </div>
                    <!-- Caso 3 -->
                    <div class="case-card bg-black-600 rounded-lg p-4 border border-gray-700 hover:border-blue-500 transition cursor-pointer"
                        data-case="3">
                        <h3 class="font-medium text-blue-400 mb-1">Caso 3: Suma Triple</h3>
                        <p class="text-sm text-gray-400">Suma tres números y almacena el total</p>
                    </div>
                </div>
                <div class="flex justify-center gap-4">
                    <button id="startBtn"
                        class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-lg font-medium transition disabled:bg-gray-700 disabled:cursor-not-allowed"
                        disabled>
                        Iniciar Ejecución
                    </button>
                    <button id="stepBtn"
                        class="bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-medium transition disabled:bg-gray-700 disabled:cursor-not-allowed"
                        disabled>
                        Paso a Paso
                    </button>
                    <button id="resetBtn"
                        class="bg-gray-700 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-medium transition">
                        Reiniciar
                    </button>
                </div>
            </div>

            <!-- Área Principal de Simulación -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- Panel de Memoria -->
                <div class="bg-black-700 rounded-lg p-4 shadow-lg lg:col-span-1">
                    <h2 class="text-xl font-semibold text-blue-400 mb-4">Memoria Principal (IAS) - 1000 palabras</h2>
                    <div class="grid grid-cols-1 gap-2 max-h-96 overflow-y-auto" id="memoryTable">
                        <!-- Las celdas de memoria serán generadas por JS -->
                    </div>
                </div>

                <!-- Panel de CPU -->
                <div class="bg-black-700 rounded-lg p-4 shadow-lg lg:col-span-2 relative">
                    <h2 class="text-xl font-semibold text-blue-400 mb-4">CPU - Unidad de Procesamiento</h2>

                    <!-- Diagrama de CPU -->
                    <div class="relative h-96">
                        <!-- SVG para buses -->
                        <svg class="absolute w-full h-full" id="cpuSvg">
                            <!-- Los buses serán dibujados por JS -->
                        </svg>

                        <!-- Componentes de CPU -->
                        <div class="absolute grid grid-cols-3 gap-4 w-full h-full">
                            <!-- Columna Izquierda: Registros -->
                            <div class="space-y-4">
                                <!-- PC -->
                                <div class="register bg-black-600 rounded p-3" id="PC">
                                    <h3 class="text-sm font-medium text-blue-400">PC</h3>
                                    <div class="mono text-sm mt-1">0x000</div>
                                </div>
                                <!-- MAR -->
                                <div class="register bg-black-600 rounded p-3" id="MAR">
                                    <h3 class="text-sm font-medium text-blue-400">MAR</h3>
                                    <div class="mono text-sm mt-1">0x000</div>
                                </div>
                                <!-- MBR -->
                                <div class="register bg-black-600 rounded p-3" id="MBR">
                                    <h3 class="text-sm font-medium text-blue-400">MBR</h3>
                                    <div class="mono text-sm mt-1">0x0000000000</div>
                                </div>
                            </div>

                            <!-- Columna Central: ALU y Control -->
                            <div class="space-y-4">
                                <!-- ALU -->
                                <div class="bg-black-600 rounded p-3 h-24 flex flex-col justify-center" id="ALU">
                                    <h3 class="text-sm font-medium text-blue-400 text-center">Unidad Aritmético-Lógica</h3>
                                    <div class="mono text-sm mt-1 text-center">INACTIVA</div>
                                </div>
                                <!-- Unidad de Control -->
                                <div class="bg-black-600 rounded p-3 h-24 flex flex-col justify-center" id="Control">
                                    <h3 class="text-sm font-medium text-blue-400 text-center">Unidad de Control</h3>
                                    <div class="mono text-sm mt-1 text-center">INACTIVA</div>
                                </div>
                            </div>

                            <!-- Columna Derecha: Más Registros -->
                            <div class="space-y-4">
                                <!-- IR -->
                                <div class="register bg-black-600 rounded p-3" id="IR">
                                    <h3 class="text-sm font-medium text-blue-400">IR</h3>
                                    <div class="mono text-sm mt-1">0x00000</div>
                                </div>
                                <!-- IBR -->
                                <div class="register bg-black-600 rounded p-3" id="IBR">
                                    <h3 class="text-sm font-medium text-blue-400">IBR</h3>
                                    <div class="mono text-sm mt-1">0x00000</div>
                                </div>
                                <!-- AC -->
                                <div class="register bg-black-600 rounded p-3" id="AC">
                                    <h3 class="text-sm font-medium text-blue-400">AC</h3>
                                    <div class="mono text-sm mt-1">0x0000000000</div>
                                </div>
                                <!-- MQ -->
                                <div class="register bg-black-600 rounded p-3" id="MQ">
                                    <h3 class="text-sm font-medium text-blue-400">MQ</h3>
                                    <div class="mono text-sm mt-1">0x0000000000</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Registro de Operaciones -->
            <div class="bg-black-700 rounded-lg p-4 shadow-lg">
                <h2 class="text-xl font-semibold text-blue-400 mb-4">Registro de Operaciones</h2>
                <div class="bg-black-800 rounded-lg p-4 h-48 overflow-y-auto mono text-sm" id="logArea">
                    <div class="text-gray-500">Seleccione un caso de prueba y haga clic en "Iniciar Ejecución" para comenzar...</div>
                </div>
            </div>
        </div>

        <!-- Von Neumann Machine Simulator Container -->
        <div id="vonNeumannSimulator" class="simulator-container">
            <!-- Von Neumann Content -->
            <div class="mb-8 text-center">
                <h2 class="text-2xl font-bold text-purple-400 mb-2">Máquina Hipotética de Von Neumann</h2>
                <p class="text-gray-400">Visualizando el flujo de instrucción de la arquitectura de von Neumann</p>
                
                <!-- Machine Architecture Information -->
                <div class="instruction-format mt-4 text-left max-w-2xl mx-auto">
                    <h3 class="text-purple-400 font-semibold mb-2">Arquitectura de Von Neumann</h3>
                    <div class="text-sm">
                        <p class="mb-2">La arquitectura de von Neumann se basa en un concepto de programa almacenado donde:</p>
                        <ul class="list-disc list-inside space-y-1 text-gray-300">
                            <li>Las instrucciones y los datos se almacenan en la misma memoria</li>
                            <li>La memoria se direcciona por ubicación sin importar su contenido</li>
                            <li>La CPU ejecuta un ciclo de búsqueda-decodificación-ejecución</li>
                            <li>Los componentes principales son: Unidad de Control, ALU, Memoria y Dispositivos de E/S</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Notation Legend -->
                <div class="instruction-format mt-4 text-left max-w-2xl mx-auto">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-purple-400 font-semibold">Notación Utilizada en el Simulador</h3>
                        <span id="toggleNotationVN" class="toggle-legend text-purple-400 text-sm">
                            <span id="toggleNotationTextVN">Mostrar</span> ▼
                        </span>
                    </div>
                    <div id="notationLegendVN" class="notation-legend">
                        <div class="text-sm space-y-2">
                            <div>
                                <p class="text-yellow-400 font-medium">Direcciones de Memoria:</p>
                                <p class="text-xs text-gray-300 mt-1">
                                    Las direcciones se representan con el prefijo <span class="mono">0x</span> para indicar una notación de memoria.
                                    Por ejemplo: <span class="mono">0x100</span> representa una dirección en memoria.
                                </p>
                            </div>
                            <div>
                                <p class="text-yellow-400 font-medium">Registros Principales:</p>
                                <p class="text-xs text-gray-300 mt-1">
                                    <span class="mono">PC</span> - Program Counter (Contador de Programa)<br>
                                    <span class="mono">MAR</span> - Memory Address Register (Registro de Dirección de Memoria)<br>
                                    <span class="mono">MDR</span> - Memory Data Register (Registro de Datos de Memoria)<br>
                                    <span class="mono">IR</span> - Instruction Register (Registro de Instrucción)<br>
                                    <span class="mono">AC</span> - Accumulator (Acumulador)
                                </p>
                            </div>
                            <div>
                                <p class="text-yellow-400 font-medium">Notación de Memoria:</p>
                                <p class="text-xs text-gray-300 mt-1">
                                    <span class="mono">M[X]</span> representa el contenido almacenado en la dirección de memoria X.<br>
                                    Por ejemplo: <span class="mono">M[0x200]</span> se refiere al dato almacenado en la dirección 0x200.
                                </p>
                            </div>
                            <div>
                                <p class="text-yellow-400 font-medium">Flujo de Datos:</p>
                                <p class="text-xs text-gray-300 mt-1">
                                    La flecha <span class="mono">→</span> indica la dirección del flujo de datos.<br>
                                    Ejemplo: <span class="mono">PC → MAR</span> significa que el contenido de PC se transfiere a MAR.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Instruction Types -->
                <div class="instruction-format mt-4 text-left max-w-4xl mx-auto">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-purple-400 font-semibold">Tipos de Instrucciones</h3>
                        <span id="toggleInstructions" class="toggle-legend text-purple-400 text-sm">
                            <span id="toggleInstructionsText">Mostrar</span> ▼
                        </span>
                    </div>
                    <div id="instructionsLegend" class="opcode-legend">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <!-- Data Transfer Instructions -->
                            <div>
                                <h4 class="text-green-400 font-medium mb-2">Instrucciones de Transferencia de Datos</h4>
                                <table class="w-full text-xs">
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">LOAD M[X]</td>
                                        <td>Carga el contenido de M[X] en el acumulador</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">STORE M[X]</td>
                                        <td>Almacena el contenido del acumulador en M[X]</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">MOVE X, Y</td>
                                        <td>Transfiere el contenido del registro X al registro Y</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <!-- Arithmetic Instructions -->
                            <div>
                                <h4 class="text-green-400 font-medium mb-2">Instrucciones Aritméticas</h4>
                                <table class="w-full text-xs">
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">ADD M[X]</td>
                                        <td>Suma el contenido de M[X] al acumulador</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">SUB M[X]</td>
                                        <td>Resta el contenido de M[X] del acumulador</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">INC X</td>
                                        <td>Incrementa el contenido del registro X en 1</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <!-- Control Flow Instructions -->
                            <div>
                                <h4 class="text-green-400 font-medium mb-2">Instrucciones de Control de Flujo</h4>
                                <table class="w-full text-xs">
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">JMP X</td>
                                        <td>Salta incondicionalmente a la dirección X</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">JZ X</td>
                                        <td>Salta a X si el acumulador es cero</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">JN X</td>
                                        <td>Salta a X si el acumulador es negativo</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <!-- I/O Instructions -->
                            <div>
                                <h4 class="text-green-400 font-medium mb-2">Instrucciones de Entrada/Salida</h4>
                                <table class="w-full text-xs">
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">IN</td>
                                        <td>Lee un dato desde un dispositivo de entrada al acumulador</td>
                                    </tr>
                                    <tr>
                                        <td class="mono text-yellow-400 pr-2">OUT</td>
                                        <td>Envía el contenido del acumulador a un dispositivo de salida</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="mt-3 text-xs text-gray-400">
                            <p><span class="text-yellow-400">Nota:</span> Esta es una representación simplificada de las instrucciones típicas en una arquitectura de von Neumann.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Selector de Casos de Prueba -->
            <div class="bg-black-700 rounded-lg p-6 mb-8 shadow-lg">
                <h2 class="text-xl font-semibold text-purple-400 mb-4">Seleccione un Caso de Prueba</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <!-- Caso 1 -->
                    <div class="case-card-vn bg-black-600 rounded-lg p-4 border border-gray-700 hover:border-purple-500 transition cursor-pointer"
                        data-case="1">
                        <h3 class="font-medium text-purple-400 mb-1">Caso 1: Suma Simple</h3>
                        <p class="text-sm text-gray-400">Carga dos números, los suma y almacena el resultado</p>
                    </div>
                    <!-- Caso 2 -->
                    <div class="case-card-vn bg-black-600 rounded-lg p-4 border border-gray-700 hover:border-purple-500 transition cursor-pointer"
                        data-case="2">
                        <h3 class="font-medium text-purple-400 mb-1">Caso 2: Bucle Contador</h3>
                        <p class="text-sm text-gray-400">Implementa un bucle que cuenta de 1 a 5</p>
                    </div>
                    <!-- Caso 3 -->
                    <div class="case-card-vn bg-black-600 rounded-lg p-4 border border-gray-700 hover:border-purple-500 transition cursor-pointer"
                        data-case="3">
                        <h3 class="font-medium text-purple-400 mb-1">Caso 3: Suma de Array</h3>
                        <p class="text-sm text-gray-400">Suma los elementos de un array de 4 números</p>
                    </div>
                </div>
                <div class="flex justify-center gap-4">
                    <button id="startBtnVN"
                        class="bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg font-medium transition disabled:bg-gray-700 disabled:cursor-not-allowed"
                        disabled>
                        Iniciar Ejecución
                    </button>
                    <button id="stepBtnVN"
                        class="bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-medium transition disabled:bg-gray-700 disabled:cursor-not-allowed"
                        disabled>
                        Paso a Paso
                    </button>
                    <button id="resetBtnVN"
                        class="bg-gray-700 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-medium transition">
                        Reiniciar
                    </button>
                </div>
            </div>

            <!-- Área Principal de Simulación -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- Panel de Memoria -->
                <div class="bg-black-700 rounded-lg p-4 shadow-lg lg:col-span-1">
                    <h2 class="text-xl font-semibold text-purple-400 mb-4">Memoria Principal</h2>
                    <div class="grid grid-cols-1 gap-2 max-h-96 overflow-y-auto" id="memoryTableVN">
                        <!-- Las celdas de memoria serán generadas por JS -->
                    </div>
                </div>

                <!-- Panel de CPU -->
                <div class="bg-black-700 rounded-lg p-4 shadow-lg lg:col-span-2 relative">
                    <h2 class="text-xl font-semibold text-purple-400 mb-4">CPU - Arquitectura de Von Neumann</h2>

                    <!-- Diagrama de CPU -->
                    <div class="relative h-96">
                        <!-- SVG para buses -->
                        <svg class="absolute w-full h-full" id="cpuSvgVN">
                            <!-- Los buses serán dibujados por JS -->
                        </svg>

                        <!-- Componentes de CPU -->
                        <div class="absolute grid grid-cols-3 gap-4 w-full h-full">
                            <!-- Columna Izquierda: Registros -->
                            <div class="space-y-4">
                                <!-- PC -->
                                <div class="register bg-black-600 rounded p-3" id="PC_VN">
                                    <h3 class="text-sm font-medium text-purple-400">PC</h3>
                                    <div class="mono text-sm mt-1">0x000</div>
                                </div>
                                <!-- MAR -->
                                <div class="register bg-black-600 rounded p-3" id="MAR_VN">
                                    <h3 class="text-sm font-medium text-purple-400">MAR</h3>
                                    <div class="mono text-sm mt-1">0x000</div>
                                </div>
                                <!-- MDR -->
                                <div class="register bg-black-600 rounded p-3" id="MDR_VN">
                                    <h3 class="text-sm font-medium text-purple-400">MDR</h3>
                                    <div class="mono text-sm mt-1">0x0000</div>
                                </div>
                            </div>

                            <!-- Columna Central: ALU y Control -->
                            <div class="space-y-4">
                                <!-- ALU -->
                                <div class="bg-black-600 rounded p-3 h-24 flex flex-col justify-center" id="ALU_VN">
                                    <h3 class="text-sm font-medium text-purple-400 text-center">Unidad Aritmético-Lógica</h3>
                                    <div class="mono text-sm mt-1 text-center">INACTIVA</div>
                                </div>
                                <!-- Unidad de Control -->
                                <div class="bg-black-600 rounded p-3 h-24 flex flex-col justify-center" id="Control_VN">
                                    <h3 class="text-sm font-medium text-purple-400 text-center">Unidad de Control</h3>
                                    <div class="mono text-sm mt-1 text-center">INACTIVA</div>
                                </div>
                            </div>

                            <!-- Columna Derecha: Más Registros -->
                            <div class="space-y-4">
                                <!-- IR -->
                                <div class="register bg-black-600 rounded p-3" id="IR_VN">
                                    <h3 class="text-sm font-medium text-purple-400">IR</h3>
                                    <div class="mono text-sm mt-1">0x0000</div>
                                </div>
                                <!-- AC -->
                                <div class="register bg-black-600 rounded p-3" id="AC_VN">
                                    <h3 class="text-sm font-medium text-purple-400">AC</h3>
                                    <div class="mono text-sm mt-1">0x0000</div>
                                </div>
                                <!-- Temporal Register -->
                                <div class="register bg-black-600 rounded p-3" id="TEMP_VN">
                                    <h3 class="text-sm font-medium text-purple-400">TEMP</h3>
                                    <div class="mono text-sm mt-1">0x0000</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Registro de Operaciones -->
            <div class="bg-black-700 rounded-lg p-4 shadow-lg">
                <h2 class="text-xl font-semibold text-purple-400 mb-4">Registro de Operaciones</h2>
                <div class="bg-black-800 rounded-lg p-4 h-48 overflow-y-auto mono text-sm" id="logAreaVN">
                    <div class="text-gray-500">Seleccione un caso de prueba y haga clic en "Iniciar Ejecución" para comenzar...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Estado de Memoria y CPU para IAS
        const stateIAS = {
            selectedCase: null,
            isRunning: false,
            stepMode: false,
            currentStep: 0,
            memory: Array(1000).fill(0), // IAS tenía 1000 palabras de memoria
            registers: {
                PC: 0,
                MAR: 0,
                MBR: 0,
                IR: 0,
                IBR: 0,
                AC: 0,
                MQ: 0
            },
            control: {
                ALU: "INACTIVA",
                Control: "INACTIVA"
            },
            testCases: {
                1: {
                    name: "Suma Básica (5 + 10)",
                    memory: {
                        "0x100": { left: "LOAD(00000001) M(0x200)", right: "ADD(00000101) M(0x201)" },
                        "0x101": { left: "STOR(00100001) M(0x202)", right: "NOP" },
                        "0x200": 5,
                        "0x201": 10,
                        "0x202": 0
                    },
                    PC: 0x100,
                    steps: [
                        {action: "highlight", component: "PC", message: "INICIO: PC (Program Counter) contiene dirección 0x100 - apunta a la primera instrucción"},
                        {action: "update", register: "MAR", value: 0x100, message: "FLUJO DE DATOS: PC (0x100) → MAR (Memory Address Register) - La dirección se transfiere al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene 0x100 - dirección de memoria que se va a acceder"},
                        {action: "update", register: "MBR", value: "LOAD(00000001) M(0x200) ADD(00000101) M(0x201)", message: "FLUJO DE DATOS: Memoria[0x100] → MBR (Memory Buffer Register) - Se lee la palabra de 40 bits (dos instrucciones) desde memoria"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: [LOAD(00000001) M(0x200) | ADD(00000101) M(0x201)] - ambas instrucciones cargadas"},
                        {action: "update", register: "IBR", value: "ADD(00000101) M(0x201)", message: "FLUJO DE DATOS: MBR.instrucción_derecha → IBR (Instruction Buffer Register) - Se almacena la instrucción derecha para ejecución posterior"},
                        {action: "highlight", component: "IBR", message: "IBR ahora contiene: ADD(00000101) M(0x201) - instrucción derecha en espera"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD(00000001) M(0x200) - Analizando la instrucción izquierda"},
                        {action: "highlight", component: "Control", message: "Unidad de Control procesando: LOAD(00000001) M(0x200)"},
                        {action: "update", register: "IR", value: "LOAD(00000001) M(0x200)", message: "FLUJO DE DATOS: MBR.instrucción_izquierda → IR (Instruction Register) - Instrucción izquierda transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR", message: "IR contiene: LOAD(00000001) M(0x200) - instrucción lista para ejecución"},
                        {action: "update", register: "MAR", value: 0x200, message: "FLUJO DE DATOS: IR.dirección(0x200) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene 0x200 - dirección del dato a cargar"},
                        {action: "update", register: "MBR", value: 5, message: "FLUJO DE DATOS: Memoria[0x200] → MBR - Se lee el valor 5 desde memoria al buffer de memoria"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: 5 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 5, message: "FLUJO DE DATOS: MBR(5) → AC (Accumulator) - El valor 5 se transfiere al acumulador"},
                        {action: "highlight", component: "AC", message: "AC ahora contiene: 5 - primer operando cargado exitosamente"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar ADD(00000101) M(0x201) desde IBR - Procesando instrucción derecha"},
                        {action: "highlight", component: "Control", message: "Unidad de Control procesando: ADD(00000101) M(0x201)"},
                        {action: "update", register: "IR", value: "ADD(00000101) M(0x201)", message: "FLUJO DE DATOS: IBR → IR - Instrucción derecha transferida desde el buffer al registro de instrucciones"},
                        {action: "highlight", component: "IR", message: "IR contiene: ADD(00000101) M(0x201) - instrucción de suma lista para ejecución"},
                        {action: "update", register: "MAR", value: 0x201, message: "FLUJO DE DATOS: IR.dirección(0x201) → MAR - Dirección del segundo operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene 0x201 - dirección del segundo dato a sumar"},
                        {action: "update", register: "MBR", value: 10, message: "FLUJO DE DATOS: Memoria[0x201] → MBR - Se lee el valor 10 desde memoria al buffer de memoria"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: 10 - segundo operando listo para la suma"},
                        {action: "update", control: "ALU", value: "SUMANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(5) y MBR(10) - Iniciando operación de suma"},
                        {action: "highlight", component: "ALU", message: "ALU calculando: 5 + 10 = 15"},
                        {action: "update", register: "AC", value: 15, message: "FLUJO DE DATOS: ALU(15) → AC - Resultado de la suma transferido al acumulador"},
                        {action: "highlight", component: "AC", message: "AC actualizado: 15 - suma completada exitosamente"},
                        {action: "update", register: "PC", value: 0x101, message: "FLUJO DE CONTROL: PC incrementado a 0x101 - Apunta al siguiente par de instrucciones"},
                        {action: "highlight", component: "PC", message: "PC ahora contiene: 0x101 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x101, message: "FLUJO DE DATOS: PC(0x101) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene: 0x101 - dirección del siguiente par de instrucciones"},
                        {action: "update", register: "MBR", value: "STOR(00100001) M(0x202) NOP", message: "FLUJO DE DATOS: Memoria[0x101] → MBR - Se lee el siguiente par de instrucciones desde memoria"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: [STOR(00100001) M(0x202) | NOP] - nuevas instrucciones cargadas"},
                        {action: "update", register: "IBR", value: "NOP", message: "FLUJO DE DATOS: MBR.instrucción_derecha → IBR - NOP almacenado en el buffer de instrucciones"},
                        {action: "highlight", component: "IBR", message: "IBR ahora contiene: NOP - instrucción nula en espera"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STOR(00100001) M(0x202) - Analizando instrucción de almacenamiento"},
                        {action: "highlight", component: "Control", message: "Unidad de Control procesando: STOR(00100001) M(0x202)"},
                        {action: "update", register: "IR", value: "STOR(00100001) M(0x202)", message: "FLUJO DE DATOS: MBR.instrucción_izquierda → IR - Instrucción STOR transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR", message: "IR contiene: STOR(00100001) M(0x202) - instrucción de almacenamiento lista"},
                        {action: "update", register: "MAR", value: 0x202, message: "FLUJO DE DATOS: IR.dirección(0x202) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene: 0x202 - dirección donde se almacenará el resultado"},
                        {action: "update", register: "MBR", value: 15, message: "FLUJO DE DATOS: AC(15) → MBR - El resultado se copia del acumulador al buffer de memoria para escritura"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: 15 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x202, value: 15, message: "FLUJO DE DATOS: MBR(15) → Memoria[0x202] - El resultado se escribe en la dirección de memoria especificada"}
                    ]
                },
                2: {
                    name: "Resta Básica (20 - 8)",
                    memory: {
                        "0x110": { left: "LOAD(00000001) M(0x200)", right: "SUB(00000110) M(0x211)" },
                        "0x111": { left: "STOR(00100001) M(0x212)", right: "NOP" },
                        "0x210": 20,
                        "0x211": 8,
                        "0x212": 0
                    },
                    PC: 0x110,
                    steps: [
                        {action: "highlight", component: "PC", message: "INICIO: PC (Program Counter) contiene dirección 0x110 - apunta a la primera instrucción"},
                        {action: "update", register: "MAR", value: 0x110, message: "FLUJO DE DATOS: PC (0x110) → MAR (Memory Address Register) - La dirección se transfiere al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene 0x110 - dirección de memoria que se va a acceder"},
                        {action: "update", register: "MBR", value: "LOAD(00000001) M(0x210) SUB(00000110) M(0x211)", message: "FLUJO DE DATOS: Memoria[0x110] → MBR (Memory Buffer Register) - Se lee la palabra de 40 bits (dos instrucciones) desde memoria"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: [LOAD(00000001) M(0x210) | SUB(00000110) M(0x211)] - ambas instrucciones cargadas"},
                        {action: "update", register: "IBR", value: "SUB(00000110) M(0x211)", message: "FLUJO DE DATOS: MBR.instrucción_derecha → IBR (Instruction Buffer Register) - Se almacena la instrucción derecha para ejecución posterior"},
                        {action: "highlight", component: "IBR", message: "IBR ahora contiene: SUB(00000110) M(0x211) - instrucción derecha en espera"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD(00000001) M(0x210) - Analizando la instrucción izquierda"},
                        {action: "highlight", component: "Control", message: "Unidad de Control procesando: LOAD(00000001) M(0x210)"},
                        {action: "update", register: "IR", value: "LOAD(00000001) M(0x210)", message: "FLUJO DE DATOS: MBR.instrucción_izquierda → IR (Instruction Register) - Instrucción izquierda transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR", message: "IR contiene: LOAD(00000001) M(0x210) - instrucción lista para ejecución"},
                        {action: "update", register: "MAR", value: 0x210, message: "FLUJO DE DATOS: IR.dirección(0x210) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene 0x210 - dirección del dato a cargar"},
                        {action: "update", register: "MBR", value: 20, message: "FLUJO DE DATOS: Memoria[0x210] → MBR - Se lee el valor 20 desde memoria al buffer de memoria"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: 20 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 20, message: "FLUJO DE DATOS: MBR(20) → AC (Accumulator) - El valor 20 se transfiere al acumulador"},
                        {action: "highlight", component: "AC", message: "AC ahora contiene: 20 - minuendo cargado exitosamente"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar SUB(00000110) M(0x211) desde IBR - Procesando instrucción derecha"},
                        {action: "highlight", component: "Control", message: "Unidad de Control procesando: SUB(00000110) M(0x211)"},
                        {action: "update", register: "IR", value: "SUB(00000110) M(0x211)", message: "FLUJO DE DATOS: IBR → IR - Instrucción derecha transferida desde el buffer al registro de instrucciones"},
                        {action: "highlight", component: "IR", message: "IR contiene: SUB(00000110) M(0x211) - instrucción de resta lista para ejecución"},
                        {action: "update", register: "MAR", value: 0x211, message: "FLUJO DE DATOS: IR.dirección(0x211) → MAR - Dirección del sustraendo transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene 0x211 - dirección del dato a restar"},
                        {action: "update", register: "MBR", value: 8, message: "FLUJO DE DATOS: Memoria[0x211] → MBR - Se lee el valor 8 desde memoria al buffer de memoria"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: 8 - sustraendo listo para la resta"},
                        {action: "update", control: "ALU", value: "RESTANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(20) y MBR(8) - Iniciando operación de resta"},
                        {action: "highlight", component: "ALU", message: "ALU calculando: 20 - 8 = 12"},
                        {action: "update", register: "AC", value: 12, message: "FLUJO DE DATOS: ALU(12) → AC - Resultado de la resta transferido al acumulador"},
                        {action: "highlight", component: "AC", message: "AC actualizado: 12 - resta completada exitosamente"},
                        {action: "update", register: "PC", value: 0x111, message: "FLUJO DE CONTROL: PC incrementado a 0x111 - Apunta al siguiente par de instrucciones"},
                        {action: "highlight", component: "PC", message: "PC ahora contiene: 0x111 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x111, message: "FLUJO DE DATOS: PC(0x111) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene: 0x111 - dirección del siguiente par de instrucciones"},
                        {action: "update", register: "MBR", value: "STOR(00100001) M(0x212) NOP", message: "FLUJO DE DATOS: Memoria[0x111] → MBR - Se lee el siguiente par de instrucciones desde memoria"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: [STOR(00100001) M(0x212) | NOP] - nuevas instrucciones cargadas"},
                        {action: "update", register: "IBR", value: "NOP", message: "FLUJO DE DATOS: MBR.instrucción_derecha → IBR - NOP almacenado en el buffer de instrucciones"},
                        {action: "highlight", component: "IBR", message: "IBR ahora contiene: NOP - instrucción nula en espera"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STOR(00100001) M(0x212) - Analizando instrucción de almacenamiento"},
                        {action: "highlight", component: "Control", message: "Unidad de Control procesando: STOR(00100001) M(0x212)"},
                        {action: "update", register: "IR", value: "STOR(00100001) M(0x212)", message: "FLUJO DE DATOS: MBR.instrucción_izquierda → IR - Instrucción STOR transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR", message: "IR contiene: STOR(00100001) M(0x212) - instrucción de almacenamiento lista"},
                        {action: "update", register: "MAR", value: 0x212, message: "FLUJO DE DATOS: IR.dirección(0x212) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene: 0x212 - dirección donde se almacenará el resultado"},
                        {action: "update", register: "MBR", value: 12, message: "FLUJO DE DATOS: AC(12) → MBR - El resultado se copia del acumulador al buffer de memoria para escritura"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: 12 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x212, value: 12, message: "FLUJO DE DATOS: MBR(12) → Memoria[0x212] - El resultado se escribe en la dirección de memoria especificada"}
                    ]
                },
                3: {
                    name: "Suma Triple (4 + 7 + 9)",
                    memory: {
                        "0x120": { left: "LOAD(00000001) M(0x220)", right: "ADD(00000101) M(0x221)" },
                        "0x121": { left: "ADD(00000101) M(0x222)", right: "STOR(00100001) M(0x223)" },
                        "0x220": 4,
                        "0x221": 7,
                        "0x222": 9,
                        "0x223": 0
                    },
                    PC: 0x120,
                    steps: [
                        {action: "highlight", component: "PC", message: "INICIO: PC (Program Counter) contiene dirección 0x120 - apunta a la primera instrucción"},
                        {action: "update", register: "MAR", value: 0x120, message: "FLUJO DE DATOS: PC (0x120) → MAR (Memory Address Register) - La dirección se transfiere al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene 0x120 - dirección de memoria que se va a acceder"},
                        {action: "update", register: "MBR", value: "LOAD(00000001) M(0x220) ADD(00000101) M(0x221)", message: "FLUJO DE DATOS: Memoria[0x120] → MBR (Memory Buffer Register) - Se lee la palabra de 40 bits (dos instrucciones) desde memoria"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: [LOAD(00000001) M(0x220) | ADD(00000101) M(0x221)] - ambas instrucciones cargadas"},
                        {action: "update", register: "IBR", value: "ADD(00000101) M(0x221)", message: "FLUJO DE DATOS: MBR.instrucción_derecha → IBR (Instruction Buffer Register) - Se almacena la instrucción derecha para ejecución posterior"},
                        {action: "highlight", component: "IBR", message: "IBR ahora contiene: ADD(00000101) M(0x221) - instrucción derecha en espera"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD(00000001) M(0x220) - Analizando la instrucción izquierda"},
                        {action: "highlight", component: "Control", message: "Unidad de Control procesando: LOAD(00000001) M(0x220)"},
                        {action: "update", register: "IR", value: "LOAD(00000001) M(0x220)", message: "FLUJO DE DATOS: MBR.instrucción_izquierda → IR (Instruction Register) - Instrucción izquierda transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR", message: "IR contiene: LOAD(00000001) M(0x220) - instrucción lista para ejecución"},
                        {action: "update", register: "MAR", value: 0x220, message: "FLUJO DE DATOS: IR.dirección(0x220) → MAR - Dirección del primer operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene 0x220 - dirección del primer dato a cargar"},
                        {action: "update", register: "MBR", value: 4, message: "FLUJO DE DATOS: Memoria[0x220] → MBR - Se lee el valor 4 desde memoria al buffer de memoria"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: 4 - primer operando listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 4, message: "FLUJO DE DATOS: MBR(4) → AC (Accumulator) - El valor 4 se transfiere al acumulador"},
                        {action: "highlight", component: "AC", message: "AC ahora contiene: 4 - primer número cargado exitosamente"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar ADD(00000101) M(0x221) desde IBR - Procesando instrucción derecha"},
                        {action: "highlight", component: "Control", message: "Unidad de Control procesando: ADD(00000101) M(0x221)"},
                        {action: "update", register: "IR", value: "ADD(00000101) M(0x221)", message: "FLUJO DE DATOS: IBR → IR - Instrucción derecha transferida desde el buffer al registro de instrucciones"},
                        {action: "highlight", component: "IR", message: "IR contiene: ADD(00000101) M(0x221) - instrucción de suma lista para ejecución"},
                        {action: "update", register: "MAR", value: 0x221, message: "FLUJO DE DATOS: IR.dirección(0x221) → MAR - Dirección del segundo operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene 0x221 - dirección del segundo dato a sumar"},
                        {action: "update", register: "MBR", value: 7, message: "FLUJO DE DATOS: Memoria[0x221] → MBR - Se lee el valor 7 desde memoria al buffer de memoria"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: 7 - segundo operando listo para la suma"},
                        {action: "update", control: "ALU", value: "SUMANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(4) y MBR(7) - Iniciando primera operación de suma"},
                        {action: "highlight", component: "ALU", message: "ALU calculando: 4 + 7 = 11"},
                        {action: "update", register: "AC", value: 11, message: "FLUJO DE DATOS: ALU(11) → AC - Resultado de la primera suma transferido al acumulador"},
                        {action: "highlight", component: "AC", message: "AC actualizado: 11 - primera suma completada (4 + 7)"},
                        {action: "update", register: "PC", value: 0x121, message: "FLUJO DE CONTROL: PC incrementado a 0x121 - Apunta al siguiente par de instrucciones"},
                        {action: "highlight", component: "PC", message: "PC ahora contiene: 0x121 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x121, message: "FLUJO DE DATOS: PC(0x121) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene: 0x121 - dirección del siguiente par de instrucciones"},
                        {action: "update", register: "MBR", value: "ADD(00000101) M(0x222) STOR(00100001) M(0x223)", message: "FLUJO DE DATOS: Memoria[0x121] → MBR - Se lee el siguiente par de instrucciones desde memoria"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: [ADD(00000101) M(0x222) | STOR(00100001) M(0x223)] - nuevas instrucciones cargadas"},
                        {action: "update", register: "IBR", value: "STOR(00100001) M(0x223)", message: "FLUJO DE DATOS: MBR.instrucción_derecha → IBR - STOR(00100001) M(0x223) almacenado en el buffer de instrucciones"},
                        {action: "highlight", component: "IBR", message: "IBR ahora contiene: STOR(00100001) M(0x223) - instrucción de almacenamiento en espera"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar ADD(00000101) M(0x222) - Analizando instrucción de suma"},
                        {action: "highlight", component: "Control", message: "Unidad de Control procesando: ADD(00000101) M(0x222)"},
                        {action: "update", register: "IR", value: "ADD(00000101) M(0x222)", message: "FLUJO DE DATOS: MBR.instrucción_izquierda → IR - Instrucción ADD transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR", message: "IR contiene: ADD(00000101) M(0x222) - instrucción de suma lista para ejecución"},
                        {action: "update", register: "MAR", value: 0x222, message: "FLUJO DE DATOS: IR.dirección(0x222) → MAR - Dirección del tercer operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene 0x222 - dirección del tercer dato a sumar"},
                        {action: "update", register: "MBR", value: 9, message: "FLUJO DE DATOS: Memoria[0x222] → MBR - Se lee el valor 9 desde memoria al buffer de memoria"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: 9 - tercer operando listo para la suma"},
                        {action: "update", control: "ALU", value: "SUMANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(11) y MBR(9) - Iniciando segunda operación de suma"},
                        {action: "highlight", component: "ALU", message: "ALU calculando: 11 + 9 = 20"},
                        {action: "update", register: "AC", value: 20, message: "FLUJO DE DATOS: ALU(20) → AC - Resultado de la segunda suma transferido al acumulador"},
                        {action: "highlight", component: "AC", message: "AC actualizado: 20 - suma total completada (4 + 7 + 9)"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STOR(00100001) M(0x223) desde IBR - Procesando instrucción derecha"},
                        {action: "highlight", component: "Control", message: "Unidad de Control procesando: STOR(00100001) M(0x223)"},
                        {action: "update", register: "IR", value: "STOR(00100001) M(0x223)", message: "FLUJO DE DATOS: IBR → IR - Instrucción STOR transferida desde el buffer al registro de instrucciones"},
                        {action: "highlight", component: "IR", message: "IR contiene: STOR(00100001) M(0x223) - instrucción de almacenamiento lista"},
                        {action: "update", register: "MAR", value: 0x223, message: "FLUJO DE DATOS: IR.dirección(0x223) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR", message: "MAR ahora contiene: 0x223 - dirección donde se almacenará el resultado final"},
                        {action: "update", register: "MBR", value: 20, message: "FLUJO DE DATOS: AC(20) → MBR - El resultado final se copia del acumulador al buffer de memoria para escritura"},
                        {action: "highlight", component: "MBR", message: "MBR contiene: 20 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x223, value: 20, message: "FLUJO DE DATOS: MBR(20) → Memoria[0x223] - El resultado final se escribe en la dirección de memoria especificada"}
                    ]
                }
            }
        };

        // Estado de Memoria y CPU para Von Neumann
        const stateVN = {
            selectedCase: null,
            isRunning: false,
            stepMode: false,
            currentStep: 0,
            memory: Array(256).fill(0), // Memoria de 256 posiciones
            registers: {
                PC: 0,
                MAR: 0,
                MDR: 0,
                IR: 0,
                AC: 0,
                TEMP: 0
            },
            control: {
                ALU: "INACTIVA",
                Control: "INACTIVA"
            },
            testCases: {
                1: {
                    name: "Suma Simple (3 + 7)",
                    memory: {
                        "0x10": "LOAD M[0x20]",
                        "0x11": "ADD M[0x21]",
                        "0x12": "STORE M[0x22]",
                        "0x13": "HALT",
                        "0x20": 3,
                        "0x21": 7,
                        "0x22": 0
                    },
                    PC: 0x10,
                    steps: [
                        {action: "highlight", component: "PC_VN", message: "INICIO: PC (Program Counter) contiene dirección 0x10 - apunta a la primera instrucción"},
                        {action: "update", register: "MAR", value: 0x10, message: "FLUJO DE DATOS: PC (0x10) → MAR (Memory Address Register) - La dirección se transfiere al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene 0x10 - dirección de memoria que se va a acceder"},
                        {action: "update", register: "MDR", value: "LOAD M[0x20]", message: "FLUJO DE DATOS: Memoria[0x10] → MDR (Memory Data Register) - Se lee la instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x20] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x20]", message: "FLUJO DE DATOS: MDR → IR (Instruction Register) - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x20] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x20] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x20]"},
                        {action: "update", register: "MAR", value: 0x20, message: "FLUJO DE DATOS: IR.dirección(0x20) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene 0x20 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 3, message: "FLUJO DE DATOS: Memoria[0x20] → MDR - Se lee el valor 3 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 3 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 3, message: "FLUJO DE DATOS: MDR(3) → AC (Accumulator) - El valor 3 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 3 - primer operando cargado exitosamente"},
                        {action: "update", register: "PC", value: 0x11, message: "FLUJO DE CONTROL: PC incrementado a 0x11 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x11 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x11, message: "FLUJO DE DATOS: PC (0x11) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x11 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "ADD M[0x21]", message: "FLUJO DE DATOS: Memoria[0x11] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: ADD M[0x21] - instrucción de suma lista para decodificar"},
                        {action: "update", register: "IR", value: "ADD M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de suma transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: ADD M[0x21] - instrucción de suma lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar ADD M[0x21] - Analizando la instrucción de suma"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: ADD M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección del segundo operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección del segundo dato a sumar"},
                        {action: "update", register: "MDR", value: 7, message: "FLUJO DE DATOS: Memoria[0x21] → MDR - Se lee el valor 7 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 7 - segundo operando listo para la suma"},
                        {action: "update", control: "ALU", value: "SUMANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(3) y MDR(7) - Iniciando operación de suma"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 3 + 7 = 10"},
                        {action: "update", register: "AC", value: 10, message: "FLUJO DE DATOS: ALU(10) → AC - Resultado de la suma transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: 10 - suma completada exitosamente"},
                        {action: "update", register: "PC", value: 0x12, message: "FLUJO DE CONTROL: PC incrementado a 0x12 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x12 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x12, message: "FLUJO DE DATOS: PC (0x12) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x12 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "STORE M[0x22]", message: "FLUJO DE DATOS: Memoria[0x12] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: STORE M[0x22] - instrucción de almacenamiento lista para decodificar"},
                        {action: "update", register: "IR", value: "STORE M[0x22]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de almacenamiento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: STORE M[0x22] - instrucción de almacenamiento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STORE M[0x22] - Analizando la instrucción de almacenamiento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: STORE M[0x22]"},
                        {action: "update", register: "MAR", value: 0x22, message: "FLUJO DE DATOS: IR.dirección(0x22) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x22 - dirección donde se almacenará el resultado"},
                        {action: "update", register: "MDR", value: 10, message: "FLUJO DE DATOS: AC(10) → MDR - El resultado se copia del acumulador al registro de datos para escritura"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 10 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x22, value: 10, message: "FLUJO DE DATOS: MDR(10) → Memoria[0x22] - El resultado se escribe en la dirección de memoria especificada"}
                    ]
                },
                2: {
                    name: "Bucle Contador (1 a 5)",
                    memory: {
                        "0x10": "LOAD M[0x20]",
                        "0x11": "STORE M[0x21]",
                        "0x12": "LOAD M[0x21]",
                        "0x13": "INC AC",
                        "0x14": "STORE M[0x21]",
                        "0x15": "LOAD M[0x21]",
                        "0x16": "SUB M[0x22]",
                        "0x17": "JZ 0x1A",
                        "0x18": "JMP 0x12",
                        "0x19": "HALT",
                        "0x1A": "HALT",
                        "0x20": 0,
                        "0x21": 0,
                        "0x22": 5
                    },
                    PC: 0x10,
                    steps: [
                        {action: "highlight", component: "PC_VN", message: "INICIO: PC (Program Counter) contiene dirección 0x10 - apunta a la primera instrucción"},
                        {action: "update", register: "MAR", value: 0x10, message: "FLUJO DE DATOS: PC (0x10) → MAR (Memory Address Register) - La dirección se transfiere al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene 0x10 - dirección de memoria que se va a acceder"},
                        {action: "update", register: "MDR", value: "LOAD M[0x20]", message: "FLUJO DE DATOS: Memoria[0x10] → MDR (Memory Data Register) - Se lee la instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x20] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x20]", message: "FLUJO DE DATOS: MDR → IR (Instruction Register) - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x20] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x20] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x20]"},
                        {action: "update", register: "MAR", value: 0x20, message: "FLUJO DE DATOS: IR.dirección(0x20) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x20 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 0, message: "FLUJO DE DATOS: Memoria[0x20] → MDR - Se lee el valor 0 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 0 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 0, message: "FLUJO DE DATOS: MDR(0) → AC (Accumulator) - El valor 0 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 0 - contador inicializado"},
                        {action: "update", register: "PC", value: 0x11, message: "FLUJO DE CONTROL: PC incrementado a 0x11 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x11 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x11, message: "FLUJO DE DATOS: PC (0x11) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x11 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "STORE M[0x21]", message: "FLUJO DE DATOS: Memoria[0x11] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: STORE M[0x21] - instrucción de almacenamiento lista para decodificar"},
                        {action: "update", register: "IR", value: "STORE M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de almacenamiento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: STORE M[0x21] - instrucción de almacenamiento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STORE M[0x21] - Analizando la instrucción de almacenamiento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: STORE M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección donde se almacenará el contador"},
                        {action: "update", register: "MDR", value: 0, message: "FLUJO DE DATOS: AC(0) → MDR - El contador se copia del acumulador al registro de datos para escritura"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 0 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x21, value: 0, message: "FLUJO DE DATOS: MDR(0) → Memoria[0x21] - El contador se escribe en la dirección de memoria especificada"},
                        {action: "update", register: "PC", value: 0x12, message: "FLUJO DE CONTROL: PC incrementado a 0x12 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x12 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x12, message: "FLUJO DE DATOS: PC (0x12) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x12 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: Memoria[0x12] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x21] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x21] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x21] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 0, message: "FLUJO DE DATOS: Memoria[0x21] → MDR - Se lee el valor 0 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 0 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 0, message: "FLUJO DE DATOS: MDR(0) → AC - El valor 0 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 0 - contador cargado desde memoria"},
                        {action: "update", register: "PC", value: 0x13, message: "FLUJO DE CONTROL: PC incrementado a 0x13 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x13 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x13, message: "FLUJO DE DATOS: PC (0x13) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x13 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "INC AC", message: "FLUJO DE DATOS: Memoria[0x13] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: INC AC - instrucción de incremento lista para decodificar"},
                        {action: "update", register: "IR", value: "INC AC", message: "FLUJO DE DATOS: MDR → IR - Instrucción de incremento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: INC AC - instrucción de incremento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar INC AC - Analizando la instrucción de incremento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: INC AC"},
                        {action: "update", control: "ALU", value: "INCREMENTANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(0) - Iniciando operación de incremento"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 0 + 1 = 1"},
                        {action: "update", register: "AC", value: 1, message: "FLUJO DE DATOS: ALU(1) → AC - Resultado del incremento transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: 1 - contador incrementado"},
                        {action: "update", register: "PC", value: 0x14, message: "FLUJO DE CONTROL: PC incrementado a 0x14 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x14 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x14, message: "FLUJO DE DATOS: PC (0x14) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x14 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "STORE M[0x21]", message: "FLUJO DE DATOS: Memoria[0x14] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: STORE M[0x21] - instrucción de almacenamiento lista para decodificar"},
                        {action: "update", register: "IR", value: "STORE M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de almacenamiento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: STORE M[0x21] - instrucción de almacenamiento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STORE M[0x21] - Analizando la instrucción de almacenamiento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: STORE M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección donde se almacenará el contador actualizado"},
                        {action: "update", register: "MDR", value: 1, message: "FLUJO DE DATOS: AC(1) → MDR - El contador actualizado se copia del acumulador al registro de datos para escritura"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 1 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x21, value: 1, message: "FLUJO DE DATOS: MDR(1) → Memoria[0x21] - El contador actualizado se escribe en la dirección de memoria especificada"},
                        {action: "update", register: "PC", value: 0x15, message: "FLUJO DE CONTROL: PC incrementado a 0x15 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x15 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x15, message: "FLUJO DE DATOS: PC (0x15) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x15 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: Memoria[0x15] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x21] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x21] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x21] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 1, message: "FLUJO DE DATOS: Memoria[0x21] → MDR - Se lee el valor 1 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 1 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 1, message: "FLUJO DE DATOS: MDR(1) → AC - El valor 1 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 1 - contador cargado desde memoria"},
                        {action: "update", register: "PC", value: 0x16, message: "FLUJO DE CONTROL: PC incrementado a 0x16 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x16 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x16, message: "FLUJO DE DATOS: PC (0x16) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x16 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "SUB M[0x22]", message: "FLUJO DE DATOS: Memoria[0x16] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: SUB M[0x22] - instrucción de resta lista para decodificar"},
                        {action: "update", register: "IR", value: "SUB M[0x22]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de resta transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: SUB M[0x22] - instrucción de resta lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar SUB M[0x22] - Analizando la instrucción de resta"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: SUB M[0x22]"},
                        {action: "update", register: "MAR", value: 0x22, message: "FLUJO DE DATOS: IR.dirección(0x22) → MAR - Dirección del límite transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x22 - dirección del límite del bucle"},
                        {action: "update", register: "MDR", value: 5, message: "FLUJO DE DATOS: Memoria[0x22] → MDR - Se lee el valor 5 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 5 - límite del bucle listo para la resta"},
                        {action: "update", control: "ALU", value: "RESTANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(1) y MDR(5) - Iniciando operación de resta"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 1 - 5 = -4"},
                        {action: "update", register: "AC", value: -4, message: "FLUJO DE DATOS: ALU(-4) → AC - Resultado de la resta transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: -4 - resultado de la comparación"},
                        {action: "update", register: "PC", value: 0x17, message: "FLUJO DE CONTROL: PC incrementado a 0x17 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x17 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x17, message: "FLUJO DE DATOS: PC (0x17) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x17 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "JZ 0x1A", message: "FLUJO DE DATOS: Memoria[0x17] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: JZ 0x1A - instrucción de salto condicional lista para decodificar"},
                        {action: "update", register: "IR", value: "JZ 0x1A", message: "FLUJO DE DATOS: MDR → IR - Instrucción de salto condicional transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: JZ 0x1A - instrucción de salto condicional lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar JZ 0x1A - Analizando la instrucción de salto condicional"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: JZ 0x1A - Comprobando si AC es cero"},
                        {action: "update", register: "PC", value: 0x18, message: "FLUJO DE CONTROL: AC no es cero (-4), PC incrementado a 0x18 - Continúa con la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x18 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x18, message: "FLUJO DE DATOS: PC (0x18) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x18 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "JMP 0x12", message: "FLUJO DE DATOS: Memoria[0x18] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: JMP 0x12 - instrucción de salto incondicional lista para decodificar"},
                        {action: "update", register: "IR", value: "JMP 0x12", message: "FLUJO DE DATOS: MDR → IR - Instrucción de salto incondicional transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: JMP 0x12 - instrucción de salto incondicional lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar JMP 0x12 - Analizando la instrucción de salto incondicional"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: JMP 0x12 - Preparando salto al inicio del bucle"},
                        {action: "update", register: "PC", value: 0x12, message: "FLUJO DE CONTROL: Salto incondicional a 0x12 - Regresa al inicio del bucle"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x12 - dirección de inicio del bucle"},
                        {action: "update", register: "MAR", value: 0x12, message: "FLUJO DE DATOS: PC (0x12) → MAR - Dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x12 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: Memoria[0x12] → MDR - Se lee la instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x21] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x21] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x21] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 1, message: "FLUJO DE DATOS: Memoria[0x21] → MDR - Se lee el valor 1 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 1 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 1, message: "FLUJO DE DATOS: MDR(1) → AC - El valor 1 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 1 - contador cargado desde memoria"},
                        {action: "update", register: "PC", value: 0x13, message: "FLUJO DE CONTROL: PC incrementado a 0x13 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x13 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x13, message: "FLUJO DE DATOS: PC (0x13) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x13 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "INC AC", message: "FLUJO DE DATOS: Memoria[0x13] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: INC AC - instrucción de incremento lista para decodificar"},
                        {action: "update", register: "IR", value: "INC AC", message: "FLUJO DE DATOS: MDR → IR - Instrucción de incremento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: INC AC - instrucción de incremento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar INC AC - Analizando la instrucción de incremento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: INC AC"},
                        {action: "update", control: "ALU", value: "INCREMENTANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(1) - Iniciando operación de incremento"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 1 + 1 = 2"},
                        {action: "update", register: "AC", value: 2, message: "FLUJO DE DATOS: ALU(2) → AC - Resultado del incremento transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: 2 - contador incrementado"},
                        {action: "update", register: "PC", value: 0x14, message: "FLUJO DE CONTROL: PC incrementado a 0x14 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x14 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x14, message: "FLUJO DE DATOS: PC (0x14) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x14 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "STORE M[0x21]", message: "FLUJO DE DATOS: Memoria[0x14] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: STORE M[0x21] - instrucción de almacenamiento lista para decodificar"},
                        {action: "update", register: "IR", value: "STORE M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de almacenamiento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: STORE M[0x21] - instrucción de almacenamiento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STORE M[0x21] - Analizando la instrucción de almacenamiento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: STORE M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección donde se almacenará el contador actualizado"},
                        {action: "update", register: "MDR", value: 2, message: "FLUJO DE DATOS: AC(2) → MDR - El contador actualizado se copia del acumulador al registro de datos para escritura"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 2 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x21, value: 2, message: "FLUJO DE DATOS: MDR(2) → Memoria[0x21] - El contador actualizado se escribe en la dirección de memoria especificada"},
                        {action: "update", register: "PC", value: 0x15, message: "FLUJO DE CONTROL: PC incrementado a 0x15 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x15 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x15, message: "FLUJO DE DATOS: PC (0x15) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x15 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: Memoria[0x15] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x21] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x21] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x21] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 2, message: "FLUJO DE DATOS: Memoria[0x21] → MDR - Se lee el valor 2 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 2 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 2, message: "FLUJO DE DATOS: MDR(2) → AC - El valor 2 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 2 - contador cargado desde memoria"},
                        {action: "update", register: "PC", value: 0x16, message: "FLUJO DE CONTROL: PC incrementado a 0x16 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x16 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x16, message: "FLUJO DE DATOS: PC (0x16) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x16 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "SUB M[0x22]", message: "FLUJO DE DATOS: Memoria[0x16] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: SUB M[0x22] - instrucción de resta lista para decodificar"},
                        {action: "update", register: "IR", value: "SUB M[0x22]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de resta transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: SUB M[0x22] - instrucción de resta lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar SUB M[0x22] - Analizando la instrucción de resta"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: SUB M[0x22]"},
                        {action: "update", register: "MAR", value: 0x22, message: "FLUJO DE DATOS: IR.dirección(0x22) → MAR - Dirección del límite transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x22 - dirección del límite del bucle"},
                        {action: "update", register: "MDR", value: 5, message: "FLUJO DE DATOS: Memoria[0x22] → MDR - Se lee el valor 5 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 5 - límite del bucle listo para la resta"},
                        {action: "update", control: "ALU", value: "RESTANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(2) y MDR(5) - Iniciando operación de resta"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 2 - 5 = -3"},
                        {action: "update", register: "AC", value: -3, message: "FLUJO DE DATOS: ALU(-3) → AC - Resultado de la resta transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: -3 - resultado de la comparación"},
                        {action: "update", register: "PC", value: 0x17, message: "FLUJO DE CONTROL: PC incrementado a 0x17 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x17 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x17, message: "FLUJO DE DATOS: PC (0x17) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x17 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "JZ 0x1A", message: "FLUJO DE DATOS: Memoria[0x17] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: JZ 0x1A - instrucción de salto condicional lista para decodificar"},
                        {action: "update", register: "IR", value: "JZ 0x1A", message: "FLUJO DE DATOS: MDR → IR - Instrucción de salto condicional transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: JZ 0x1A - instrucción de salto condicional lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar JZ 0x1A - Analizando la instrucción de salto condicional"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: JZ 0x1A - Comprobando si AC es cero"},
                        {action: "update", register: "PC", value: 0x18, message: "FLUJO DE CONTROL: AC no es cero (-3), PC incrementado a 0x18 - Continúa con la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x18 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x18, message: "FLUJO DE DATOS: PC (0x18) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x18 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "JMP 0x12", message: "FLUJO DE DATOS: Memoria[0x18] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: JMP 0x12 - instrucción de salto incondicional lista para decodificar"},
                        {action: "update", register: "IR", value: "JMP 0x12", message: "FLUJO DE DATOS: MDR → IR - Instrucción de salto incondicional transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: JMP 0x12 - instrucción de salto incondicional lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar JMP 0x12 - Analizando la instrucción de salto incondicional"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: JMP 0x12 - Preparando salto al inicio del bucle"},
                        {action: "update", register: "PC", value: 0x12, message: "FLUJO DE CONTROL: Salto incondicional a 0x12 - Regresa al inicio del bucle"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x12 - dirección de inicio del bucle"},
                        {action: "update", register: "MAR", value: 0x12, message: "FLUJO DE DATOS: PC (0x12) → MAR - Dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x12 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: Memoria[0x12] → MDR - Se lee la instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x21] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x21] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x21] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 2, message: "FLUJO DE DATOS: Memoria[0x21] → MDR - Se lee el valor 2 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 2 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 2, message: "FLUJO DE DATOS: MDR(2) → AC - El valor 2 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 2 - contador cargado desde memoria"},
                        {action: "update", register: "PC", value: 0x13, message: "FLUJO DE CONTROL: PC incrementado a 0x13 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x13 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x13, message: "FLUJO DE DATOS: PC (0x13) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x13 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "INC AC", message: "FLUJO DE DATOS: Memoria[0x13] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: INC AC - instrucción de incremento lista para decodificar"},
                        {action: "update", register: "IR", value: "INC AC", message: "FLUJO DE DATOS: MDR → IR - Instrucción de incremento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: INC AC - instrucción de incremento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar INC AC - Analizando la instrucción de incremento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: INC AC"},
                        {action: "update", control: "ALU", value: "INCREMENTANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(2) - Iniciando operación de incremento"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 2 + 1 = 3"},
                        {action: "update", register: "AC", value: 3, message: "FLUJO DE DATOS: ALU(3) → AC - Resultado del incremento transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: 3 - contador incrementado"},
                        {action: "update", register: "PC", value: 0x14, message: "FLUJO DE CONTROL: PC incrementado a 0x14 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x14 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x14, message: "FLUJO DE DATOS: PC (0x14) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x14 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "STORE M[0x21]", message: "FLUJO DE DATOS: Memoria[0x14] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: STORE M[0x21] - instrucción de almacenamiento lista para decodificar"},
                        {action: "update", register: "IR", value: "STORE M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de almacenamiento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: STORE M[0x21] - instrucción de almacenamiento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STORE M[0x21] - Analizando la instrucción de almacenamiento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: STORE M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección donde se almacenará el contador actualizado"},
                        {action: "update", register: "MDR", value: 3, message: "FLUJO DE DATOS: AC(3) → MDR - El contador actualizado se copia del acumulador al registro de datos para escritura"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 3 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x21, value: 3, message: "FLUJO DE DATOS: MDR(3) → Memoria[0x21] - El contador actualizado se escribe en la dirección de memoria especificada"},
                        {action: "update", register: "PC", value: 0x15, message: "FLUJO DE CONTROL: PC incrementado a 0x15 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x15 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x15, message: "FLUJO DE DATOS: PC (0x15) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x15 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: Memoria[0x15] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x21] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x21] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x21] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 3, message: "FLUJO DE DATOS: Memoria[0x21] → MDR - Se lee el valor 3 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 3 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 3, message: "FLUJO DE DATOS: MDR(3) → AC - El valor 3 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 3 - contador cargado desde memoria"},
                        {action: "update", register: "PC", value: 0x16, message: "FLUJO DE CONTROL: PC incrementado a 0x16 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x16 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x16, message: "FLUJO DE DATOS: PC (0x16) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x16 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "SUB M[0x22]", message: "FLUJO DE DATOS: Memoria[0x16] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: SUB M[0x22] - instrucción de resta lista para decodificar"},
                        {action: "update", register: "IR", value: "SUB M[0x22]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de resta transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: SUB M[0x22] - instrucción de resta lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar SUB M[0x22] - Analizando la instrucción de resta"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: SUB M[0x22]"},
                        {action: "update", register: "MAR", value: 0x22, message: "FLUJO DE DATOS: IR.dirección(0x22) → MAR - Dirección del límite transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x22 - dirección del límite del bucle"},
                        {action: "update", register: "MDR", value: 5, message: "FLUJO DE DATOS: Memoria[0x22] → MDR - Se lee el valor 5 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 5 - límite del bucle listo para la resta"},
                        {action: "update", control: "ALU", value: "RESTANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(3) y MDR(5) - Iniciando operación de resta"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 3 - 5 = -2"},
                        {action: "update", register: "AC", value: -2, message: "FLUJO DE DATOS: ALU(-2) → AC - Resultado de la resta transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: -2 - resultado de la comparación"},
                        {action: "update", register: "PC", value: 0x17, message: "FLUJO DE CONTROL: PC incrementado a 0x17 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x17 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x17, message: "FLUJO DE DATOS: PC (0x17) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x17 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "JZ 0x1A", message: "FLUJO DE DATOS: Memoria[0x17] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: JZ 0x1A - instrucción de salto condicional lista para decodificar"},
                        {action: "update", register: "IR", value: "JZ 0x1A", message: "FLUJO DE DATOS: MDR → IR - Instrucción de salto condicional transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: JZ 0x1A - instrucción de salto condicional lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar JZ 0x1A - Analizando la instrucción de salto condicional"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: JZ 0x1A - Comprobando si AC es cero"},
                        {action: "update", register: "PC", value: 0x18, message: "FLUJO DE CONTROL: AC no es cero (-2), PC incrementado a 0x18 - Continúa con la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x18 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x18, message: "FLUJO DE DATOS: PC (0x18) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x18 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "JMP 0x12", message: "FLUJO DE DATOS: Memoria[0x18] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: JMP 0x12 - instrucción de salto incondicional lista para decodificar"},
                        {action: "update", register: "IR", value: "JMP 0x12", message: "FLUJO DE DATOS: MDR → IR - Instrucción de salto incondicional transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: JMP 0x12 - instrucción de salto incondicional lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar JMP 0x12 - Analizando la instrucción de salto incondicional"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: JMP 0x12 - Preparando salto al inicio del bucle"},
                        {action: "update", register: "PC", value: 0x12, message: "FLUJO DE CONTROL: Salto incondicional a 0x12 - Regresa al inicio del bucle"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x12 - dirección de inicio del bucle"},
                        {action: "update", register: "MAR", value: 0x12, message: "FLUJO DE DATOS: PC (0x12) → MAR - Dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x12 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: Memoria[0x12] → MDR - Se lee la instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x21] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x21] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x21] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 3, message: "FLUJO DE DATOS: Memoria[0x21] → MDR - Se lee el valor 3 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 3 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 3, message: "FLUJO DE DATOS: MDR(3) → AC - El valor 3 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 3 - contador cargado desde memoria"},
                        {action: "update", register: "PC", value: 0x13, message: "FLUJO DE CONTROL: PC incrementado a 0x13 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x13 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x13, message: "FLUJO DE DATOS: PC (0x13) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x13 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "INC AC", message: "FLUJO DE DATOS: Memoria[0x13] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: INC AC - instrucción de incremento lista para decodificar"},
                        {action: "update", register: "IR", value: "INC AC", message: "FLUJO DE DATOS: MDR → IR - Instrucción de incremento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: INC AC - instrucción de incremento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar INC AC - Analizando la instrucción de incremento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: INC AC"},
                        {action: "update", control: "ALU", value: "INCREMENTANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(3) - Iniciando operación de incremento"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 3 + 1 = 4"},
                        {action: "update", register: "AC", value: 4, message: "FLUJO DE DATOS: ALU(4) → AC - Resultado del incremento transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: 4 - contador incrementado"},
                        {action: "update", register: "PC", value: 0x14, message: "FLUJO DE CONTROL: PC incrementado a 0x14 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x14 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x14, message: "FLUJO DE DATOS: PC (0x14) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x14 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "STORE M[0x21]", message: "FLUJO DE DATOS: Memoria[0x14] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: STORE M[0x21] - instrucción de almacenamiento lista para decodificar"},
                        {action: "update", register: "IR", value: "STORE M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de almacenamiento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: STORE M[0x21] - instrucción de almacenamiento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STORE M[0x21] - Analizando la instrucción de almacenamiento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: STORE M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección donde se almacenará el contador actualizado"},
                        {action: "update", register: "MDR", value: 4, message: "FLUJO DE DATOS: AC(4) → MDR - El contador actualizado se copia del acumulador al registro de datos para escritura"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 4 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x21, value: 4, message: "FLUJO DE DATOS: MDR(4) → Memoria[0x21] - El contador actualizado se escribe en la dirección de memoria especificada"},
                        {action: "update", register: "PC", value: 0x15, message: "FLUJO DE CONTROL: PC incrementado a 0x15 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x15 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x15, message: "FLUJO DE DATOS: PC (0x15) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x15 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: Memoria[0x15] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x21] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x21] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x21] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 4, message: "FLUJO DE DATOS: Memoria[0x21] → MDR - Se lee el valor 4 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 4 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 4, message: "FLUJO DE DATOS: MDR(4) → AC - El valor 4 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 4 - contador cargado desde memoria"},
                        {action: "update", register: "PC", value: 0x16, message: "FLUJO DE CONTROL: PC incrementado a 0x16 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x16 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x16, message: "FLUJO DE DATOS: PC (0x16) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x16 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "SUB M[0x22]", message: "FLUJO DE DATOS: Memoria[0x16] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: SUB M[0x22] - instrucción de resta lista para decodificar"},
                        {action: "update", register: "IR", value: "SUB M[0x22]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de resta transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: SUB M[0x22] - instrucción de resta lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar SUB M[0x22] - Analizando la instrucción de resta"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: SUB M[0x22]"},
                        {action: "update", register: "MAR", value: 0x22, message: "FLUJO DE DATOS: IR.dirección(0x22) → MAR - Dirección del límite transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x22 - dirección del límite del bucle"},
                        {action: "update", register: "MDR", value: 5, message: "FLUJO DE DATOS: Memoria[0x22] → MDR - Se lee el valor 5 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 5 - límite del bucle listo para la resta"},
                        {action: "update", control: "ALU", value: "RESTANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(4) y MDR(5) - Iniciando operación de resta"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 4 - 5 = -1"},
                        {action: "update", register: "AC", value: -1, message: "FLUJO DE DATOS: ALU(-1) → AC - Resultado de la resta transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: -1 - resultado de la comparación"},
                        {action: "update", register: "PC", value: 0x17, message: "FLUJO DE CONTROL: PC incrementado a 0x17 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x17 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x17, message: "FLUJO DE DATOS: PC (0x17) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x17 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "JZ 0x1A", message: "FLUJO DE DATOS: Memoria[0x17] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: JZ 0x1A - instrucción de salto condicional lista para decodificar"},
                        {action: "update", register: "IR", value: "JZ 0x1A", message: "FLUJO DE DATOS: MDR → IR - Instrucción de salto condicional transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: JZ 0x1A - instrucción de salto condicional lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar JZ 0x1A - Analizando la instrucción de salto condicional"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: JZ 0x1A - Comprobando si AC es cero"},
                        {action: "update", register: "PC", value: 0x18, message: "FLUJO DE CONTROL: AC no es cero (-1), PC incrementado a 0x18 - Continúa con la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x18 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x18, message: "FLUJO DE DATOS: PC (0x18) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x18 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "JMP 0x12", message: "FLUJO DE DATOS: Memoria[0x18] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: JMP 0x12 - instrucción de salto incondicional lista para decodificar"},
                        {action: "update", register: "IR", value: "JMP 0x12", message: "FLUJO DE DATOS: MDR → IR - Instrucción de salto incondicional transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: JMP 0x12 - instrucción de salto incondicional lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar JMP 0x12 - Analizando la instrucción de salto incondicional"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: JMP 0x12 - Preparando salto al inicio del bucle"},
                        {action: "update", register: "PC", value: 0x12, message: "FLUJO DE CONTROL: Salto incondicional a 0x12 - Regresa al inicio del bucle"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x12 - dirección de inicio del bucle"},
                        {action: "update", register: "MAR", value: 0x12, message: "FLUJO DE DATOS: PC (0x12) → MAR - Dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x12 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: Memoria[0x12] → MDR - Se lee la instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x21] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x21] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x21] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 4, message: "FLUJO DE DATOS: Memoria[0x21] → MDR - Se lee el valor 4 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 4 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 4, message: "FLUJO DE DATOS: MDR(4) → AC - El valor 4 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 4 - contador cargado desde memoria"},
                        {action: "update", register: "PC", value: 0x13, message: "FLUJO DE CONTROL: PC incrementado a 0x13 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x13 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x13, message: "FLUJO DE DATOS: PC (0x13) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x13 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "INC AC", message: "FLUJO DE DATOS: Memoria[0x13] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: INC AC - instrucción de incremento lista para decodificar"},
                        {action: "update", register: "IR", value: "INC AC", message: "FLUJO DE DATOS: MDR → IR - Instrucción de incremento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: INC AC - instrucción de incremento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar INC AC - Analizando la instrucción de incremento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: INC AC"},
                        {action: "update", control: "ALU", value: "INCREMENTANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(4) - Iniciando operación de incremento"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 4 + 1 = 5"},
                        {action: "update", register: "AC", value: 5, message: "FLUJO DE DATOS: ALU(5) → AC - Resultado del incremento transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: 5 - contador incrementado"},
                        {action: "update", register: "PC", value: 0x14, message: "FLUJO DE CONTROL: PC incrementado a 0x14 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x14 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x14, message: "FLUJO DE DATOS: PC (0x14) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x14 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "STORE M[0x21]", message: "FLUJO DE DATOS: Memoria[0x14] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: STORE M[0x21] - instrucción de almacenamiento lista para decodificar"},
                        {action: "update", register: "IR", value: "STORE M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de almacenamiento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: STORE M[0x21] - instrucción de almacenamiento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STORE M[0x21] - Analizando la instrucción de almacenamiento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: STORE M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección donde se almacenará el contador actualizado"},
                        {action: "update", register: "MDR", value: 5, message: "FLUJO DE DATOS: AC(5) → MDR - El contador actualizado se copia del acumulador al registro de datos para escritura"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 5 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x21, value: 5, message: "FLUJO DE DATOS: MDR(5) → Memoria[0x21] - El contador actualizado se escribe en la dirección de memoria especificada"},
                        {action: "update", register: "PC", value: 0x15, message: "FLUJO DE CONTROL: PC incrementado a 0x15 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x15 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x15, message: "FLUJO DE DATOS: PC (0x15) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x15 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: Memoria[0x15] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x21] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x21] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x21] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 5, message: "FLUJO DE DATOS: Memoria[0x21] → MDR - Se lee el valor 5 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 5 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 5, message: "FLUJO DE DATOS: MDR(5) → AC - El valor 5 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 5 - contador cargado desde memoria"},
                        {action: "update", register: "PC", value: 0x16, message: "FLUJO DE CONTROL: PC incrementado a 0x16 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x16 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x16, message: "FLUJO DE DATOS: PC (0x16) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x16 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "SUB M[0x22]", message: "FLUJO DE DATOS: Memoria[0x16] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: SUB M[0x22] - instrucción de resta lista para decodificar"},
                        {action: "update", register: "IR", value: "SUB M[0x22]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de resta transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: SUB M[0x22] - instrucción de resta lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar SUB M[0x22] - Analizando la instrucción de resta"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: SUB M[0x22]"},
                        {action: "update", register: "MAR", value: 0x22, message: "FLUJO DE DATOS: IR.dirección(0x22) → MAR - Dirección del límite transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x22 - dirección del límite del bucle"},
                        {action: "update", register: "MDR", value: 5, message: "FLUJO DE DATOS: Memoria[0x22] → MDR - Se lee el valor 5 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 5 - límite del bucle listo para la resta"},
                        {action: "update", control: "ALU", value: "RESTANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(5) y MDR(5) - Iniciando operación de resta"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 5 - 5 = 0"},
                        {action: "update", register: "AC", value: 0, message: "FLUJO DE DATOS: ALU(0) → AC - Resultado de la resta transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: 0 - resultado de la comparación"},
                        {action: "update", register: "PC", value: 0x17, message: "FLUJO DE CONTROL: PC incrementado a 0x17 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x17 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x17, message: "FLUJO DE DATOS: PC (0x17) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x17 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "JZ 0x1A", message: "FLUJO DE DATOS: Memoria[0x17] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: JZ 0x1A - instrucción de salto condicional lista para decodificar"},
                        {action: "update", register: "IR", value: "JZ 0x1A", message: "FLUJO DE DATOS: MDR → IR - Instrucción de salto condicional transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: JZ 0x1A - instrucción de salto condicional lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar JZ 0x1A - Analizando la instrucción de salto condicional"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: JZ 0x1A - Comprobando si AC es cero"},
                        {action: "update", register: "PC", value: 0x1A, message: "FLUJO DE CONTROL: AC es cero (0), salto a 0x1A - Sale del bucle"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x1A - dirección de fin del programa"},
                        {action: "update", register: "MAR", value: 0x1A, message: "FLUJO DE DATOS: PC (0x1A) → MAR - Dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x1A - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "HALT", message: "FLUJO DE DATOS: Memoria[0x1A] → MDR - Se lee la instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: HALT - instrucción de fin de programa lista para decodificar"},
                        {action: "update", register: "IR", value: "HALT", message: "FLUJO DE DATOS: MDR → IR - Instrucción de fin de programa transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: HALT - instrucción de fin de programa lista para ejecución"},
                        {action: "update", control: "Control", value: "DETENIDO", message: "UNIDAD DE CONTROL: Activada para ejecutar HALT - Deteniendo la ejecución del programa"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control detenida - Programa finalizado"}
                    ]
                },
                3: {
                    name: "Suma de Array (2+4+6+8)",
                    memory: {
                        "0x10": "LOAD M[0x20]",
                        "0x11": "STORE M[0x30]",
                        "0x12": "LOAD M[0x30]",
                        "0x13": "ADD M[0x21]",
                        "0x14": "STORE M[0x30]",
                        "0x15": "LOAD M[0x30]",
                        "0x16": "ADD M[0x22]",
                        "0x17": "STORE M[0x30]",
                        "0x18": "LOAD M[0x30]",
                        "0x19": "ADD M[0x23]",
                        "0x1A": "STORE M[0x30]",
                        "0x1B": "HALT",
                        "0x20": 2,
                        "0x21": 4,
                        "0x22": 6,
                        "0x23": 8,
                        "0x30": 0
                    },
                    PC: 0x10,
                    steps: [
                        {action: "highlight", component: "PC_VN", message: "INICIO: PC (Program Counter) contiene dirección 0x10 - apunta a la primera instrucción"},
                        {action: "update", register: "MAR", value: 0x10, message: "FLUJO DE DATOS: PC (0x10) → MAR (Memory Address Register) - La dirección se transfiere al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene 0x10 - dirección de memoria que se va a acceder"},
                        {action: "update", register: "MDR", value: "LOAD M[0x20]", message: "FLUJO DE DATOS: Memoria[0x10] → MDR (Memory Data Register) - Se lee la instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x20] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x20]", message: "FLUJO DE DATOS: MDR → IR (Instruction Register) - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x20] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x20] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x20]"},
                        {action: "update", register: "MAR", value: 0x20, message: "FLUJO DE DATOS: IR.dirección(0x20) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene 0x20 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 2, message: "FLUJO DE DATOS: Memoria[0x20] → MDR - Se lee el valor 2 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 2 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 2, message: "FLUJO DE DATOS: MDR(2) → AC (Accumulator) - El valor 2 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 2 - primer elemento del array cargado"},
                        {action: "update", register: "PC", value: 0x11, message: "FLUJO DE CONTROL: PC incrementado a 0x11 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x11 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x11, message: "FLUJO DE DATOS: PC (0x11) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x11 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "STORE M[0x30]", message: "FLUJO DE DATOS: Memoria[0x11] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: STORE M[0x30] - instrucción de almacenamiento lista para decodificar"},
                        {action: "update", register: "IR", value: "STORE M[0x30]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de almacenamiento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: STORE M[0x30] - instrucción de almacenamiento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STORE M[0x30] - Analizando la instrucción de almacenamiento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: STORE M[0x30]"},
                        {action: "update", register: "MAR", value: 0x30, message: "FLUJO DE DATOS: IR.dirección(0x30) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x30 - dirección donde se almacenará el resultado parcial"},
                        {action: "update", register: "MDR", value: 2, message: "FLUJO DE DATOS: AC(2) → MDR - El valor se copia del acumulador al registro de datos para escritura"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 2 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x30, value: 2, message: "FLUJO DE DATOS: MDR(2) → Memoria[0x30] - El primer elemento se escribe en la dirección de memoria especificada"},
                        {action: "update", register: "PC", value: 0x12, message: "FLUJO DE CONTROL: PC incrementado a 0x12 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x12 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x12, message: "FLUJO DE DATOS: PC (0x12) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x12 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "LOAD M[0x30]", message: "FLUJO DE DATOS: Memoria[0x12] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x30] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x30]", message: "FLUJO DE DATOS: MDR → IR - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x30] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x30] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x30]"},
                        {action: "update", register: "MAR", value: 0x30, message: "FLUJO DE DATOS: IR.dirección(0x30) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x30 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 2, message: "FLUJO DE DATOS: Memoria[0x30] → MDR - Se lee el valor 2 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 2 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 2, message: "FLUJO DE DATOS: MDR(2) → AC - El valor 2 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 2 - resultado parcial cargado desde memoria"},
                        {action: "update", register: "PC", value: 0x13, message: "FLUJO DE CONTROL: PC incrementado a 0x13 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x13 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x13, message: "FLUJO DE DATOS: PC (0x13) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x13 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "ADD M[0x21]", message: "FLUJO DE DATOS: Memoria[0x13] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: ADD M[0x21] - instrucción de suma lista para decodificar"},
                        {action: "update", register: "IR", value: "ADD M[0x21]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de suma transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: ADD M[0x21] - instrucción de suma lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar ADD M[0x21] - Analizando la instrucción de suma"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: ADD M[0x21]"},
                        {action: "update", register: "MAR", value: 0x21, message: "FLUJO DE DATOS: IR.dirección(0x21) → MAR - Dirección del segundo operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x21 - dirección del segundo dato a sumar"},
                        {action: "update", register: "MDR", value: 4, message: "FLUJO DE DATOS: Memoria[0x21] → MDR - Se lee el valor 4 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 4 - segundo operando listo para la suma"},
                        {action: "update", control: "ALU", value: "SUMANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(2) y MDR(4) - Iniciando operación de suma"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 2 + 4 = 6"},
                        {action: "update", register: "AC", value: 6, message: "FLUJO DE DATOS: ALU(6) → AC - Resultado de la suma transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: 6 - suma parcial (2 + 4) completada"},
                        {action: "update", register: "PC", value: 0x14, message: "FLUJO DE CONTROL: PC incrementado a 0x14 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x14 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x14, message: "FLUJO DE DATOS: PC (0x14) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x14 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "STORE M[0x30]", message: "FLUJO DE DATOS: Memoria[0x14] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: STORE M[0x30] - instrucción de almacenamiento lista para decodificar"},
                        {action: "update", register: "IR", value: "STORE M[0x30]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de almacenamiento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: STORE M[0x30] - instrucción de almacenamiento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STORE M[0x30] - Analizando la instrucción de almacenamiento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: STORE M[0x30]"},
                        {action: "update", register: "MAR", value: 0x30, message: "FLUJO DE DATOS: IR.dirección(0x30) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x30 - dirección donde se almacenará el resultado parcial"},
                        {action: "update", register: "MDR", value: 6, message: "FLUJO DE DATOS: AC(6) → MDR - El resultado parcial se copia del acumulador al registro de datos para escritura"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 6 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x30, value: 6, message: "FLUJO DE DATOS: MDR(6) → Memoria[0x30] - El resultado parcial se escribe en la dirección de memoria especificada"},
                        {action: "update", register: "PC", value: 0x15, message: "FLUJO DE CONTROL: PC incrementado a 0x15 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x15 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x15, message: "FLUJO DE DATOS: PC (0x15) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x15 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "LOAD M[0x30]", message: "FLUJO DE DATOS: Memoria[0x15] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x30] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x30]", message: "FLUJO DE DATOS: MDR → IR - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x30] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x30] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x30]"},
                        {action: "update", register: "MAR", value: 0x30, message: "FLUJO DE DATOS: IR.dirección(0x30) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x30 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 6, message: "FLUJO DE DATOS: Memoria[0x30] → MDR - Se lee el valor 6 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 6 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 6, message: "FLUJO DE DATOS: MDR(6) → AC - El valor 6 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 6 - resultado parcial cargado desde memoria"},
                        {action: "update", register: "PC", value: 0x16, message: "FLUJO DE CONTROL: PC incrementado a 0x16 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x16 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x16, message: "FLUJO DE DATOS: PC (0x16) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x16 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "ADD M[0x22]", message: "FLUJO DE DATOS: Memoria[0x16] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: ADD M[0x22] - instrucción de suma lista para decodificar"},
                        {action: "update", register: "IR", value: "ADD M[0x22]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de suma transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: ADD M[0x22] - instrucción de suma lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar ADD M[0x22] - Analizando la instrucción de suma"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: ADD M[0x22]"},
                        {action: "update", register: "MAR", value: 0x22, message: "FLUJO DE DATOS: IR.dirección(0x22) → MAR - Dirección del tercer operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x22 - dirección del tercer dato a sumar"},
                        {action: "update", register: "MDR", value: 6, message: "FLUJO DE DATOS: Memoria[0x22] → MDR - Se lee el valor 6 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 6 - tercer operando listo para la suma"},
                        {action: "update", control: "ALU", value: "SUMANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(6) y MDR(6) - Iniciando operación de suma"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 6 + 6 = 12"},
                        {action: "update", register: "AC", value: 12, message: "FLUJO DE DATOS: ALU(12) → AC - Resultado de la suma transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: 12 - suma parcial (2 + 4 + 6) completada"},
                        {action: "update", register: "PC", value: 0x17, message: "FLUJO DE CONTROL: PC incrementado a 0x17 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x17 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x17, message: "FLUJO DE DATOS: PC (0x17) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x17 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "STORE M[0x30]", message: "FLUJO DE DATOS: Memoria[0x17] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: STORE M[0x30] - instrucción de almacenamiento lista para decodificar"},
                        {action: "update", register: "IR", value: "STORE M[0x30]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de almacenamiento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: STORE M[0x30] - instrucción de almacenamiento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STORE M[0x30] - Analizando la instrucción de almacenamiento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: STORE M[0x30]"},
                        {action: "update", register: "MAR", value: 0x30, message: "FLUJO DE DATOS: IR.dirección(0x30) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x30 - dirección donde se almacenará el resultado parcial"},
                        {action: "update", register: "MDR", value: 12, message: "FLUJO DE DATOS: AC(12) → MDR - El resultado parcial se copia del acumulador al registro de datos para escritura"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 12 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x30, value: 12, message: "FLUJO DE DATOS: MDR(12) → Memoria[0x30] - El resultado parcial se escribe en la dirección de memoria especificada"},
                        {action: "update", register: "PC", value: 0x18, message: "FLUJO DE CONTROL: PC incrementado a 0x18 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x18 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x18, message: "FLUJO DE DATOS: PC (0x18) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x18 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "LOAD M[0x30]", message: "FLUJO DE DATOS: Memoria[0x18] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: LOAD M[0x30] - instrucción lista para decodificar"},
                        {action: "update", register: "IR", value: "LOAD M[0x30]", message: "FLUJO DE DATOS: MDR → IR - Instrucción transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: LOAD M[0x30] - instrucción lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar LOAD M[0x30] - Analizando la instrucción"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: LOAD M[0x30]"},
                        {action: "update", register: "MAR", value: 0x30, message: "FLUJO DE DATOS: IR.dirección(0x30) → MAR - Dirección del operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x30 - dirección del dato a cargar"},
                        {action: "update", register: "MDR", value: 12, message: "FLUJO DE DATOS: Memoria[0x30] → MDR - Se lee el valor 12 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 12 - dato listo para transferir al acumulador"},
                        {action: "update", register: "AC", value: 12, message: "FLUJO DE DATOS: MDR(12) → AC - El valor 12 se transfiere al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC ahora contiene: 12 - resultado parcial cargado desde memoria"},
                        {action: "update", register: "PC", value: 0x19, message: "FLUJO DE CONTROL: PC incrementado a 0x19 - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x19 - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x19, message: "FLUJO DE DATOS: PC (0x19) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x19 - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "ADD M[0x23]", message: "FLUJO DE DATOS: Memoria[0x19] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: ADD M[0x23] - instrucción de suma lista para decodificar"},
                        {action: "update", register: "IR", value: "ADD M[0x23]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de suma transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: ADD M[0x23] - instrucción de suma lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar ADD M[0x23] - Analizando la instrucción de suma"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: ADD M[0x23]"},
                        {action: "update", register: "MAR", value: 0x23, message: "FLUJO DE DATOS: IR.dirección(0x23) → MAR - Dirección del cuarto operando transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x23 - dirección del cuarto dato a sumar"},
                        {action: "update", register: "MDR", value: 8, message: "FLUJO DE DATOS: Memoria[0x23] → MDR - Se lee el valor 8 desde memoria al registro de datos"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 8 - cuarto operando listo para la suma"},
                        {action: "update", control: "ALU", value: "SUMANDO", message: "ALU (Arithmetic Logic Unit): Recibe AC(12) y MDR(8) - Iniciando operación de suma"},
                        {action: "highlight", component: "ALU_VN", message: "ALU calculando: 12 + 8 = 20"},
                        {action: "update", register: "AC", value: 20, message: "FLUJO DE DATOS: ALU(20) → AC - Resultado de la suma transferido al acumulador"},
                        {action: "highlight", component: "AC_VN", message: "AC actualizado: 20 - suma total (2 + 4 + 6 + 8) completada"},
                        {action: "update", register: "PC", value: 0x1A, message: "FLUJO DE CONTROL: PC incrementado a 0x1A - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x1A - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x1A, message: "FLUJO DE DATOS: PC (0x1A) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x1A - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "STORE M[0x30]", message: "FLUJO DE DATOS: Memoria[0x1A] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: STORE M[0x30] - instrucción de almacenamiento lista para decodificar"},
                        {action: "update", register: "IR", value: "STORE M[0x30]", message: "FLUJO DE DATOS: MDR → IR - Instrucción de almacenamiento transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: STORE M[0x30] - instrucción de almacenamiento lista para ejecución"},
                        {action: "update", control: "Control", value: "DECODIFICANDO", message: "UNIDAD DE CONTROL: Activada para decodificar STORE M[0x30] - Analizando la instrucción de almacenamiento"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control procesando: STORE M[0x30]"},
                        {action: "update", register: "MAR", value: 0x30, message: "FLUJO DE DATOS: IR.dirección(0x30) → MAR - Dirección de destino transferida al registro de direcciones"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x30 - dirección donde se almacenará el resultado final"},
                        {action: "update", register: "MDR", value: 20, message: "FLUJO DE DATOS: AC(20) → MDR - El resultado final se copia del acumulador al registro de datos para escritura"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: 20 - dato listo para ser escrito en memoria"},
                        {action: "memory", address: 0x30, value: 20, message: "FLUJO DE DATOS: MDR(20) → Memoria[0x30] - El resultado final se escribe en la dirección de memoria especificada"},
                        {action: "update", register: "PC", value: 0x1B, message: "FLUJO DE CONTROL: PC incrementado a 0x1B - Apunta a la siguiente instrucción"},
                        {action: "highlight", component: "PC_VN", message: "PC ahora contiene: 0x1B - siguiente dirección de instrucción"},
                        {action: "update", register: "MAR", value: 0x1B, message: "FLUJO DE DATOS: PC (0x1B) → MAR - Nueva dirección transferida al registro de direcciones de memoria"},
                        {action: "highlight", component: "MAR_VN", message: "MAR ahora contiene: 0x1B - dirección de la siguiente instrucción"},
                        {action: "update", register: "MDR", value: "HALT", message: "FLUJO DE DATOS: Memoria[0x1B] → MDR - Se lee la siguiente instrucción desde memoria"},
                        {action: "highlight", component: "MDR_VN", message: "MDR contiene: HALT - instrucción de fin de programa lista para decodificar"},
                        {action: "update", register: "IR", value: "HALT", message: "FLUJO DE DATOS: MDR → IR - Instrucción de fin de programa transferida al registro de instrucciones"},
                        {action: "highlight", component: "IR_VN", message: "IR contiene: HALT - instrucción de fin de programa lista para ejecución"},
                        {action: "update", control: "Control", value: "DETENIDO", message: "UNIDAD DE CONTROL: Activada para ejecutar HALT - Deteniendo la ejecución del programa"},
                        {action: "highlight", component: "Control_VN", message: "Unidad de Control detenida - Programa finalizado"}
                    ]
                }
            }
        };

        // Elementos DOM para IAS
        const caseCards = document.querySelectorAll('.case-card');
        const startBtn = document.getElementById('startBtn');
        const stepBtn = document.getElementById('stepBtn');
        const resetBtn = document.getElementById('resetBtn');
        const memoryTable = document.getElementById('memoryTable');
        const logArea = document.getElementById('logArea');
        const cpuSvg = document.getElementById('cpuSvg');
        const toggleLegend = document.getElementById('toggleLegend');
        const toggleText = document.getElementById('toggleText');
        const opcodeLegend = document.getElementById('opcodeLegend');
        const toggleNotation = document.getElementById('toggleNotation');
        const toggleNotationText = document.getElementById('toggleNotationText');
        const notationLegend = document.getElementById('notationLegend');

        // Elementos DOM para Von Neumann
        const caseCardsVN = document.querySelectorAll('.case-card-vn');
        const startBtnVN = document.getElementById('startBtnVN');
        const stepBtnVN = document.getElementById('stepBtnVN');
        const resetBtnVN = document.getElementById('resetBtnVN');
        const memoryTableVN = document.getElementById('memoryTableVN');
        const logAreaVN = document.getElementById('logAreaVN');
        const cpuSvgVN = document.getElementById('cpuSvgVN');
        const toggleNotationVN = document.getElementById('toggleNotationVN');
        const toggleNotationTextVN = document.getElementById('toggleNotationTextVN');
        const notationLegendVN = document.getElementById('notationLegendVN');
        const toggleInstructions = document.getElementById('toggleInstructions');
        const toggleInstructionsText = document.getElementById('toggleInstructionsText');
        const instructionsLegend = document.getElementById('instructionsLegend');

        // Elementos DOM para selección de simulador
        const iasCard = document.getElementById('iasCard');
        const vonNeumannCard = document.getElementById('vonNeumannCard');
        const iasSimulator = document.getElementById('iasSimulator');
        const vonNeumannSimulator = document.getElementById('vonNeumannSimulator');

        // Inicializar el simulador
        function initSimulator() {
            // Eventos para selección de simulador
            iasCard.addEventListener('click', () => {
                iasSimulator.classList.add('active');
                vonNeumannSimulator.classList.remove('active');
                iasCard.classList.add('border-blue-500', 'bg-blue-800');
                vonNeumannCard.classList.remove('border-purple-500', 'bg-purple-800');
                initIASSimulator();
            });

            vonNeumannCard.addEventListener('click', () => {
                vonNeumannSimulator.classList.add('active');
                iasSimulator.classList.remove('active');
                vonNeumannCard.classList.add('border-purple-500', 'bg-purple-800');
                iasCard.classList.remove('border-blue-500', 'bg-blue-800');
                initVNSimulator();
            });

            // Inicializar simulador IAS por defecto
            iasSimulator.classList.add('active');
            iasCard.classList.add('border-blue-500', 'bg-blue-800');
            initIASSimulator();
        }

        // Inicializar simulador IAS
        function initIASSimulator() {
            renderMemoryIAS();
            renderBusesIAS();

            // Toggle para la leyenda de notación
            toggleNotation.addEventListener('click', () => {
                notationLegend.classList.toggle('expanded');
                toggleNotationText.textContent = notationLegend.classList.contains('expanded') ? 'Ocultar' : 'Mostrar';
            });

            // Toggle para la leyenda de opcodes
            toggleLegend.addEventListener('click', () => {
                opcodeLegend.classList.toggle('expanded');
                toggleText.textContent = opcodeLegend.classList.contains('expanded') ? 'Ocultar' : 'Mostrar';
            });

            // Selección de caso
            caseCards.forEach(card => {
                card.addEventListener('click', () => {
                    caseCards.forEach(c => c.classList.remove('border-blue-500', 'bg-blue-800'));
                    card.classList.add('border-blue-500', 'bg-blue-800');
                    stateIAS.selectedCase = parseInt(card.dataset.case);
                    startBtn.disabled = false;
                    stepBtn.disabled = false;
                    resetSimulatorIAS();
                    loadTestCaseIAS(stateIAS.selectedCase);
                    addLogIAS(`Caso de prueba ${stateIAS.selectedCase} seleccionado: ${stateIAS.testCases[ stateIAS.selectedCase ].name}`);
                });
            });

            // Botón de inicio
            startBtn.addEventListener('click', () => {
                if (stateIAS.selectedCase && !stateIAS.isRunning) {
                    stateIAS.isRunning = true;
                    stateIAS.stepMode = false;
                    startBtn.disabled = true;
                    stepBtn.disabled = true;
                    startBtn.textContent = "Ejecutando...";
                    executeStepIAS();
                }
            });

            // Botón de paso a paso
            stepBtn.addEventListener('click', () => {
                if (stateIAS.selectedCase && !stateIAS.isRunning) {
                    stateIAS.isRunning = true;
                    stateIAS.stepMode = true;
                    startBtn.disabled = true;
                    executeStepIAS();
                }
            });

            // Botón de reinicio
            resetBtn.addEventListener('click', resetSimulatorIAS);
        }

        // Inicializar simulador Von Neumann
        function initVNSimulator() {
            renderMemoryVN();
            renderBusesVN();

            // Toggle para la leyenda de notación
            toggleNotationVN.addEventListener('click', () => {
                notationLegendVN.classList.toggle('expanded');
                toggleNotationTextVN.textContent = notationLegendVN.classList.contains('expanded') ? 'Ocultar' : 'Mostrar';
            });

            // Toggle para la leyenda de instrucciones
            toggleInstructions.addEventListener('click', () => {
                instructionsLegend.classList.toggle('expanded');
                toggleInstructionsText.textContent = instructionsLegend.classList.contains('expanded') ? 'Ocultar' : 'Mostrar';
            });

            // Selección de caso
            caseCardsVN.forEach(card => {
                card.addEventListener('click', () => {
                    caseCardsVN.forEach(c => c.classList.remove('border-purple-500', 'bg-purple-800'));
                    card.classList.add('border-purple-500', 'bg-purple-800');
                    stateVN.selectedCase = parseInt(card.dataset.case);
                    startBtnVN.disabled = false;
                    stepBtnVN.disabled = false;
                    resetSimulatorVN();
                    loadTestCaseVN(stateVN.selectedCase);
                    addLogVN(`Caso de prueba ${stateVN.selectedCase} seleccionado: ${stateVN.testCases[ stateVN.selectedCase ].name}`);
                });
            });

            // Botón de inicio
            startBtnVN.addEventListener('click', () => {
                if (stateVN.selectedCase && !stateVN.isRunning) {
                    stateVN.isRunning = true;
                    stateVN.stepMode = false;
                    startBtnVN.disabled = true;
                    stepBtnVN.disabled = true;
                    startBtnVN.textContent = "Ejecutando...";
                    executeStepVN();
                }
            });

            // Botón de paso a paso
            stepBtnVN.addEventListener('click', () => {
                if (stateVN.selectedCase && !stateVN.isRunning) {
                    stateVN.isRunning = true;
                    stateVN.stepMode = true;
                    startBtnVN.disabled = true;
                    executeStepVN();
                }
            });

            // Botón de reinicio
            resetBtnVN.addEventListener('click', resetSimulatorVN);
        }

        // Cargar un caso de prueba en memoria IAS
        function loadTestCaseIAS(testCase) {
            const tc = stateIAS.testCases[ testCase ];

            // Reiniciar memoria
            stateIAS.memory = Array(1000).fill(0);

            // Cargar instrucciones y datos
            for (const [ addr, value ] of Object.entries(tc.memory)) {
                const addrNum = parseInt(addr);
                if (typeof value === 'number') {
                    stateIAS.memory[ addrNum ] = value;
                } else {
                    // Almacenar pares de instrucciones
                    stateIAS.memory[ addrNum ] = value;
                }
            }

            // Establecer PC
            stateIAS.registers.PC = tc.PC;

            // Reiniciar otros registros
            stateIAS.registers.MAR = 0;
            stateIAS.registers.MBR = 0;
            stateIAS.registers.IR = 0;
            stateIAS.registers.IBR = 0;
            stateIAS.registers.AC = 0;
            stateIAS.registers.MQ = 0;

            // Renderizar actualizaciones
            renderMemoryIAS();
            renderRegistersIAS();
            renderControlIAS();
        }

        // Cargar un caso de prueba en memoria Von Neumann
        function loadTestCaseVN(testCase) {
            const tc = stateVN.testCases[ testCase ];

            // Reiniciar memoria
            stateVN.memory = Array(256).fill(0);

            // Cargar instrucciones y datos
            for (const [ addr, value ] of Object.entries(tc.memory)) {
                const addrNum = parseInt(addr);
                stateVN.memory[ addrNum ] = value;
            }

            // Establecer PC
            stateVN.registers.PC = tc.PC;

            // Reiniciar otros registros
            stateVN.registers.MAR = 0;
            stateVN.registers.MDR = 0;
            stateVN.registers.IR = 0;
            stateVN.registers.AC = 0;
            stateVN.registers.TEMP = 0;

            // Renderizar actualizaciones
            renderMemoryVN();
            renderRegistersVN();
            renderControlVN();
        }

        // Ejecutar un paso de la simulación IAS
        async function executeStepIAS() {
            if (!stateIAS.isRunning) return;

            const tc = stateIAS.testCases[ stateIAS.selectedCase ];

            if (stateIAS.currentStep < tc.steps.length) {
                const step = tc.steps[ stateIAS.currentStep ];

                // Ejecutar la acción individual
                await executeActionIAS(step);

                stateIAS.currentStep++;

                // Continuar al siguiente paso después del retraso si no está en modo paso a paso
                if (!stateIAS.stepMode) {
                    setTimeout(executeStepIAS, 800);
                } else {
                    stateIAS.isRunning = false;
                    startBtn.disabled = false;
                }
            } else {
                // Ejecución completada
                stateIAS.isRunning = false;
                stateIAS.stepMode = false;
                startBtn.disabled = false;
                stepBtn.disabled = false;
                startBtn.textContent = "Iniciar Ejecución";
                addLogIAS(`Ejecución completada. Resultado final: ${stateIAS.memory[ tc.PC + 3 ]}`);
            }
        }

        // Ejecutar un paso de la simulación Von Neumann
        async function executeStepVN() {
            if (!stateVN.isRunning) return;

            const tc = stateVN.testCases[ stateVN.selectedCase ];

            if (stateVN.currentStep < tc.steps.length) {
                const step = tc.steps[ stateVN.currentStep ];

                // Ejecutar la acción individual
                await executeActionVN(step);

                stateVN.currentStep++;

                // Continuar al siguiente paso después del retraso si no está en modo paso a paso
                if (!stateVN.stepMode) {
                    setTimeout(executeStepVN, 800);
                } else {
                    stateVN.isRunning = false;
                    startBtnVN.disabled = false;
                }
            } else {
                // Ejecución completada
                stateVN.isRunning = false;
                stateVN.stepMode = false;
                startBtnVN.disabled = false;
                stepBtnVN.disabled = false;
                startBtnVN.textContent = "Iniciar Ejecución";
                addLogVN(`Ejecución completada. Resultado final: ${stateVN.memory[ 0x30 ]}`);
            }
        }

        // Ejecutar una sola acción IAS
        async function executeActionIAS(action) {
            // Agregar mensaje al registro
            addLogIAS(`Paso ${stateIAS.currentStep + 1}: ${action.message}`, true);

            // Ejecutar la acción según el tipo
            switch (action.action) {
                case "highlight":
                    highlightComponentIAS(action.component);
                    break;
                case "update":
                    if (action.register) {
                        stateIAS.registers[action.register] = action.value;
                    } else if (action.control) {
                        stateIAS.control[action.control] = action.value;
                    }
                    break;
                case "memory":
                    stateIAS.memory[action.address] = action.value;
                    renderMemoryIAS();
                    break;
            }

            // Actualizar displays
            renderRegistersIAS();
            renderControlIAS();

            // Esperar a que el resaltado sea visible
            await new Promise(resolve => setTimeout(resolve, 600));
        }

        // Ejecutar una sola acción Von Neumann
        async function executeActionVN(action) {
            // Agregar mensaje al registro
            addLogVN(`Paso ${stateVN.currentStep + 1}: ${action.message}`, true);

            // Ejecutar la acción según el tipo
            switch (action.action) {
                case "highlight":
                    highlightComponentVN(action.component);
                    break;
                case "update":
                    if (action.register) {
                        stateVN.registers[action.register] = action.value;
                    } else if (action.control) {
                        stateVN.control[action.control] = action.value;
                    }
                    break;
                case "memory":
                    stateVN.memory[action.address] = action.value;
                    renderMemoryVN();
                    break;
            }

            // Actualizar displays
            renderRegistersVN();
            renderControlVN();

            // Esperar a que el resaltado sea visible
            await new Promise(resolve => setTimeout(resolve, 600));
        }

        // Resaltar un componente IAS temporalmente
        function highlightComponentIAS(id) {
            const element = document.getElementById(id);
            if (element) {
                element.classList.add('highlight');
                setTimeout(() => {
                    element.classList.remove('highlight');
                }, 1000);
            }
        }

        // Resaltar un componente Von Neumann temporalmente
        function highlightComponentVN(id) {
            const element = document.getElementById(id);
            if (element) {
                element.classList.add('highlight');
                setTimeout(() => {
                    element.classList.remove('highlight');
                }, 1000);
            }
        }

        // Agregar una entrada al registro IAS
        function addLogIAS(message, isStep = false) {
            const entry = document.createElement('div');
            entry.className = `log-entry ${isStep ? 'text-blue-400' : 'text-gray-300'} mb-1`;
            entry.textContent = message;
            logArea.appendChild(entry);
            logArea.scrollTop = logArea.scrollHeight;
        }

        // Agregar una entrada al registro Von Neumann
        function addLogVN(message, isStep = false) {
            const entry = document.createElement('div');
            entry.className = `log-entry ${isStep ? 'text-purple-400' : 'text-gray-300'} mb-1`;
            entry.textContent = message;
            logAreaVN.appendChild(entry);
            logAreaVN.scrollTop = logAreaVN.scrollHeight;
        }

        // Reiniciar el simulador IAS al estado inicial
        function resetSimulatorIAS() {
            stateIAS.isRunning = false;
            stateIAS.stepMode = false;
            stateIAS.currentStep = 0;

            // Reiniciar registros
            stateIAS.registers = {
                PC: 0,
                MAR: 0,
                MBR: 0,
                IR: 0,
                IBR: 0,
                AC: 0,
                MQ: 0
            };

            // Reiniciar control
            stateIAS.control = {
                ALU: "INACTIVA",
                Control: "INACTIVA"
            };

            // Reiniciar UI
            startBtn.disabled = !stateIAS.selectedCase;
            stepBtn.disabled = !stateIAS.selectedCase;
            startBtn.textContent = "Iniciar Ejecución";

            // Limpiar registro si no hay caso seleccionado
            if (!stateIAS.selectedCase) {
                logArea.innerHTML = '<div class="text-gray-500">Seleccione un caso de prueba y haga clic en "Iniciar Ejecución" para comenzar...</div>';
            } else {
                loadTestCaseIAS(stateIAS.selectedCase);
                addLogIAS(`Simulador reiniciado. Caso de prueba ${stateIAS.selectedCase} cargado.`);
            }

            // Actualizar displays
            renderRegistersIAS();
            renderControlIAS();
        }

        // Reiniciar el simulador Von Neumann al estado inicial
        function resetSimulatorVN() {
            stateVN.isRunning = false;
            stateVN.stepMode = false;
            stateVN.currentStep = 0;

            // Reiniciar registros
            stateVN.registers = {
                PC: 0,
                MAR: 0,
                MDR: 0,
                IR: 0,
                AC: 0,
                TEMP: 0
            };

            // Reiniciar control
            stateVN.control = {
                ALU: "INACTIVA",
                Control: "INACTIVA"
            };

            // Reiniciar UI
            startBtnVN.disabled = !stateVN.selectedCase;
            stepBtnVN.disabled = !stateVN.selectedCase;
            startBtnVN.textContent = "Iniciar Ejecución";

            // Limpiar registro si no hay caso seleccionado
            if (!stateVN.selectedCase) {
                logAreaVN.innerHTML = '<div class="text-gray-500">Seleccione un caso de prueba y haga clic en "Iniciar Ejecución" para comenzar...</div>';
            } else {
                loadTestCaseVN(stateVN.selectedCase);
                addLogVN(`Simulador reiniciado. Caso de prueba ${stateVN.selectedCase} cargado.`);
            }

            // Actualizar displays
            renderRegistersVN();
            renderControlVN();
        }

        // Renderizar tabla de memoria IAS
        function renderMemoryIAS() {
            memoryTable.innerHTML = '';

            // Determinar qué direcciones de memoria mostrar según el caso de prueba seleccionado
            let addresses = [];
            if (stateIAS.selectedCase) {
                const tc = stateIAS.testCases[ stateIAS.selectedCase ];
                addresses = Object.keys(tc.memory).map(addr => parseInt(addr));
            }

            // Mostrar al menos 16 celdas de memoria centradas alrededor de PC si no hay caso seleccionado
            if (addresses.length === 0) {
                addresses = Array.from({ length: 16 }, (_, i) => i * 0x10);
            }

            // Crear celdas de memoria
            addresses.forEach(addr => {
                const cell = document.createElement('div');
                cell.className = 'memory-cell bg-black-600 rounded p-2 flex justify-between';

                const addrSpan = document.createElement('span');
                addrSpan.className = 'mono text-blue-400';
                addrSpan.textContent = `0x${addr.toString(16).toUpperCase().padStart(3, '0')}`;

                const valueSpan = document.createElement('span');
                valueSpan.className = 'mono';

                const value = stateIAS.memory[ addr ];
                if (typeof value === 'object' && value !== null) {
                    // Par de instrucciones
                    valueSpan.innerHTML = `<span class="text-green-400">${value.left}</span><br><span class="text-purple-400">${value.right}</span>`;
                } else if (typeof value === 'string') {
                    valueSpan.textContent = value;
                    valueSpan.classList.add('text-green-400');
                } else {
                    valueSpan.textContent = value.toString();
                    valueSpan.classList.add('text-yellow-400');
                }

                cell.appendChild(addrSpan);
                cell.appendChild(valueSpan);
                memoryTable.appendChild(cell);
            });
        }

        // Renderizar tabla de memoria Von Neumann
        function renderMemoryVN() {
            memoryTableVN.innerHTML = '';

            // Determinar qué direcciones de memoria mostrar según el caso de prueba seleccionado
            let addresses = [];
            if (stateVN.selectedCase) {
                const tc = stateVN.testCases[ stateVN.selectedCase ];
                addresses = Object.keys(tc.memory).map(addr => parseInt(addr));
            }

            // Mostrar al menos 16 celdas de memoria centradas alrededor de PC si no hay caso seleccionado
            if (addresses.length === 0) {
                addresses = Array.from({ length: 16 }, (_, i) => i * 0x10);
            }

            // Crear celdas de memoria
            addresses.forEach(addr => {
                const cell = document.createElement('div');
                cell.className = 'memory-cell bg-black-600 rounded p-2 flex justify-between';

                const addrSpan = document.createElement('span');
                addrSpan.className = 'mono text-purple-400';
                addrSpan.textContent = `0x${addr.toString(16).toUpperCase().padStart(2, '0')}`;

                const valueSpan = document.createElement('span');
                valueSpan.className = 'mono';

                const value = stateVN.memory[ addr ];
                if (typeof value === 'string') {
                    valueSpan.textContent = value;
                    valueSpan.classList.add('text-green-400');
                } else {
                    valueSpan.textContent = value.toString();
                    valueSpan.classList.add('text-yellow-400');
                }

                cell.appendChild(addrSpan);
                cell.appendChild(valueSpan);
                memoryTableVN.appendChild(cell);
            });
        }

        // Renderizar valores de registros IAS
        function renderRegistersIAS() {
            for (const [ reg, value ] of Object.entries(stateIAS.registers)) {
                const element = document.getElementById(reg);
                if (element) {
                    const valueElement = element.querySelector('div:nth-child(2)');
                    if (valueElement) {
                        if (reg === 'PC' || reg === 'MAR') {
                            valueElement.textContent = `0x${value.toString(16).toUpperCase().padStart(3, '0')}`;
                        } else if (reg === 'IR' || reg === 'IBR') {
                            if (typeof value === 'string') {
                                valueElement.textContent = value;
                            } else {
                                valueElement.textContent = `0x${value.toString(16).toUpperCase().padStart(5, '0')}`;
                            }
                        } else if (reg === 'MBR' || reg === 'AC' || reg === 'MQ') {
                            if (typeof value === 'string') {
                                valueElement.textContent = value;
                            } else {
                                valueElement.textContent = `0x${value.toString(16).toUpperCase().padStart(10, '0')}`;
                            }
                        } else {
                            valueElement.textContent = value.toString();
                        }
                    }
                }
            }
        }

        // Renderizar valores de registros Von Neumann
        function renderRegistersVN() {
            for (const [ reg, value ] of Object.entries(stateVN.registers)) {
                const element = document.getElementById(reg + '_VN');
                if (element) {
                    const valueElement = element.querySelector('div:nth-child(2)');
                    if (valueElement) {
                        if (reg === 'PC' || reg === 'MAR') {
                            valueElement.textContent = `0x${value.toString(16).toUpperCase().padStart(2, '0')}`;
                        } else if (reg === 'IR' || reg === 'MDR' || reg === 'AC' || reg === 'TEMP') {
                            if (typeof value === 'string') {
                                valueElement.textContent = value;
                            } else {
                                valueElement.textContent = `0x${value.toString(16).toUpperCase().padStart(4, '0')}`;
                            }
                        } else {
                            valueElement.textContent = value.toString();
                        }
                    }
                }
            }
        }

        // Renderizar estados de la unidad de control IAS
        function renderControlIAS() {
            for (const [ unit, stateText ] of Object.entries(stateIAS.control)) {
                const element = document.getElementById(unit);
                if (element) {
                    const stateElement = element.querySelector('div:nth-child(2)');
                    if (stateElement) {
                        stateElement.textContent = stateText;
                        stateElement.className = 'mono text-sm mt-1 text-center ' +
                            (stateText === "INACTIVA" ? 'text-gray-400' : 'text-blue-400');
                    }
                }
            }
        }

        // Renderizar estados de la unidad de control Von Neumann
        function renderControlVN() {
            for (const [ unit, stateText ] of Object.entries(stateVN.control)) {
                const element = document.getElementById(unit + '_VN');
                if (element) {
                    const stateElement = element.querySelector('div:nth-child(2)');
                    if (stateElement) {
                        stateElement.textContent = stateText;
                        stateElement.className = 'mono text-sm mt-1 text-center ' +
                            (stateText === "INACTIVA" ? 'text-gray-400' : 'text-purple-400');
                    }
                }
            }
        }

        // Renderizar conexiones de buses IAS (simplificado para demo)
        function renderBusesIAS() {
            // Limpiar buses existentes
            cpuSvg.innerHTML = '';

            // Bus de Datos (representación simplificada)
            const dataBus = document.createElementNS("http://www.w3.org/2000/svg", "path");
            dataBus.setAttribute("d", "M25,50 L75,50");
            dataBus.setAttribute("class", "bus");
            dataBus.setAttribute("id", "dataBus");
            cpuSvg.appendChild(dataBus);

            // Bus de Direcciones (representación simplificada)
            const addressBus = document.createElementNS("http://www.w3.org/2000/svg", "path");
            addressBus.setAttribute("d", "M25,80 L75,80");
            addressBus.setAttribute("class", "bus");
            addressBus.setAttribute("id", "addressBus");
            cpuSvg.appendChild(addressBus);
        }

        // Renderizar conexiones de buses Von Neumann (simplificado para demo)
        function renderBusesVN() {
            // Limpiar buses existentes
            cpuSvgVN.innerHTML = '';

            // Bus de Datos (representación simplificada)
            const dataBus = document.createElementNS("http://www.w3.org/2000/svg", "path");
            dataBus.setAttribute("d", "M25,50 L75,50");
            dataBus.setAttribute("class", "bus");
            dataBus.setAttribute("id", "dataBusVN");
            cpuSvgVN.appendChild(dataBus);

            // Bus de Direcciones (representación simplificada)
            const addressBus = document.createElementNS("http://www.w3.org/2000/svg", "path");
            addressBus.setAttribute("d", "M25,80 L75,80");
            addressBus.setAttribute("class", "bus");
            addressBus.setAttribute("id", "addressBusVN");
            cpuSvgVN.appendChild(addressBus);
        }

        // Inicializar cuando el DOM esté cargado
        document.addEventListener('DOMContentLoaded', initSimulator);
    </script>
</body>

</html>